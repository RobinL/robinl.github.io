"use strict";(self.webpackChunkrobinlinacre=self.webpackChunkrobinlinacre||[]).push([[7161],{3011:function(e,t,a){a.r(t),a.d(t,{default:function(){return xe},output_order:function(){return ye}});var n=a(7294),i=a(7848);function r(e){return e`# Match Weights Charts`}function o(e){return{config:{view:{width:e/3,height:300},title:{anchor:"middle",offset:10},header:{title:null}},hconcat:[{mark:"bar",title:{text:"Non-matches",fontWeight:"normal"},encoding:{row:{type:"nominal",field:"column_name",sort:{field:"gamma_index"},header:{labelAngle:0,labelAnchor:"middle",labelAlign:"left"}},x:{type:"quantitative",field:"u_probability",axis:{title:"proportion"}},y:{type:"nominal",axis:{title:null},field:"level_name"},tooltip:[{type:"nominal",field:"column_name"},{type:"ordinal",field:"level_name"},{type:"quantitative",field:"u_probability",format:".4f"},{type:"quantitative",field:"bayes_factor",format:".4f"},{type:"nominal",field:"level_proportion",title:"Percentage of record comparisons in this level",format:".2%"},{type:"quantitative",field:"log2_bayes_factor",format:".4f"}],color:{value:"red"}},resolve:{scale:{y:"independent"}},transform:[{filter:"(datum.bayes_factor != 'unnecessary filter2 due to vega lite issue 4680')"}],height:50},{mark:"bar",title:{text:"Matches",fontWeight:"normal"},encoding:{row:{type:"nominal",field:"column_name",sort:{field:"gamma_index"},header:{labels:!1}},x:{type:"quantitative",field:"m_probability",axis:{title:"proportion"}},y:{type:"nominal",axis:{title:null},field:"level_name"},tooltip:[{type:"nominal",field:"column_name"},{type:"ordinal",field:"level_name"},{type:"quantitative",field:"m_probability",format:".4f"},{type:"quantitative",field:"bayes_factor",format:".4f"},{type:"nominal",field:"level_proportion",title:"Percentage of record comparisons in this level",format:".2%"},{type:"quantitative",field:"log2_bayes_factor",format:".4f"}],color:{value:"green"}},resolve:{scale:{y:"independent"}},transform:[{filter:"(datum.bayes_factor != 'unnecessary filter due to vega lite issue 4680')"}],height:50}],data:{values:null},transform:[],title:{text:"Probability distributions of non-matches and matches ",subtitle:"Estimated proportion of matches λ = "},$schema:"https://vega.github.io/schema/vega-lite/v4.json"}}function l(e){return{config:{view:{width:e/1.5,height:300},mark:{tooltip:null},title:{anchor:"middle"},header:{title:null}},data:{values:null},mark:{type:"bar",clip:!0},selection:{selector076:{type:"interval",bind:"scales",encodings:["x"]}},encoding:{color:{type:"quantitative",field:"log2_bayes_factor",scale:{range:["red","orange","green"],domain:[-10,0,10]}},row:{type:"nominal",field:"column_name",sort:{field:"gamma_index"},header:{labelAngle:0,labelAnchor:"middle",labelAlign:"left"}},tooltip:[{type:"nominal",field:"column_name"},{type:"ordinal",field:"level_name"},{type:"quantitative",field:"m_probability",format:".4f"},{type:"quantitative",field:"bayes_factor",format:".4f"},{type:"nominal",field:"level_proportion",title:"Percentage of record comparisons in this level",format:".2%"},{type:"quantitative",field:"log2_bayes_factor",title:"log2(Bayes factor, K = m/u)",format:".4f"}],x:{type:"quantitative",axis:{title:"log2(Bayes factor, K = m/u)",values:[-10,-5,0,5,10]},field:"log2_bayes_factor",scale:{domain:[-10,10]}},y:{type:"nominal",field:"level_name",axis:{title:null}}},height:50,resolve:{scale:{y:"independent"}},title:{text:"Influence of comparison vector values on match probability",subtitle:"Use mousewheeel to zoom"},$schema:"https://vega.github.io/schema/vega-lite/v4.json"}}function s(e){return JSON.parse(e)}function c(e){return function(t){let a=[];return t.comparison_columns.forEach((t=>{var n,i;(n=t.m_probabilities,i=t.u_probabilities,n.map(((e,t)=>[e,i[t]]))).forEach(((n,i)=>{let r=e(n,t,i);a.push(r)}))})),a}}function m(e,t,a){return function(n){let i=JSON.parse(JSON.stringify(e)),r=n.proportion_of_matches;return i.data.values=t(n),i.title.subtitle=`Estimated proportion of matches λ = ${r}`,a(i)}}function _(e,t){return e(t)}function u(e,t,a){return function(n){let i=JSON.parse(JSON.stringify(e)),r=n.proportion_of_matches;return i.data.values=t(n),i.title.subtitle=`Estimated proportion of matches λ = ${r.toPrecision(4)}`,a(i)}}function f(e,t){return e(t)}function d(){return function(e,t,a){let n={},i=t;return n.m_probability=e[0],n.u_probability=e[1],n.bayes_factor=e[0]/e[1],n.column_name=i.col_name,n.log2_bayes_factor=Math.log2(n.bayes_factor),n.gamma_index=a,n.gamma_column_name="gamma_"+i.col_name,n.level_name="level_"+a,n.max_gamma_index=i.m_probabilities.length-1,n.num_levels=i.m_probabilities.length,n}}function h(){return'{\n    "proportion_of_matches": 0.001,\n    "comparison_columns": [\n      {\n        "col_name": "fname",\n        "u_probabilities": [0.8, 0.2],\n        "m_probabilities": [0.2, 0.8]\n      },\n      {\n        "col_name": "sname",\n        "u_probabilities": [0.9, 0.1],\n        "m_probabilities": [0.2, 0.8]\n      },\n      {\n        "col_name": "dob",\n        "u_probabilities": [0.99, 0.01],\n        "m_probabilities": [0.2, 0.8]\n      },\n      {\n        "col_name": "town",\n        "u_probabilities": [0.7, 0.3],\n        "m_probabilities": [0.3, 0.7]\n      }\n    ]\n  \n  }'}function p(e){return e("vega-embed@6")}function g(e,t){const a=e.module();return a.variable(t()).define(["md"],r),a.variable(t("base_spec_m_u")).define("base_spec_m_u",["width"],o),a.variable(t("base_spec_bayes_factors")).define("base_spec_bayes_factors",["width"],l),a.variable(t("settings_example")).define("settings_example",["default_splink_settings"],s),a.variable(t("chart_data_from_splink_settings")).define("chart_data_from_splink_settings",["get_chart_row"],c),a.variable(t("get_m_u_chart")).define("get_m_u_chart",["base_spec_m_u","chart_data_from_splink_settings","embed"],m),a.variable(t()).define(["get_m_u_chart","settings_example"],_),a.variable(t("get_bayes_factor_chart")).define("get_bayes_factor_chart",["base_spec_bayes_factors","chart_data_from_splink_settings","embed"],u),a.variable(t()).define(["get_bayes_factor_chart","settings_example"],f),a.variable(t("get_chart_row")).define("get_chart_row",d),a.variable(t("default_splink_settings")).define("default_splink_settings",h),a.variable(t("embed")).define("embed",["require"],p),a}function v(e){return e`# Resizable areas`}function b(e){return e.range([2,6],{label:"num levels",step:1,value:3})}function y(e){return e`## Drag within the bars to resize

Note that if you change the number of levels of the axis squishiness, values will reset`}function w(e,t,a,n){return e(t,a,n,0,!0,0)}function x(e){return function(t,a,n){if(0==t)return e.scaleLinear().domain([0,1]).range([n,0]);let i,r=t;if(r>=0)i=e=>Math.pow(5,e)/(Math.pow(5,e)+1);else{i=e=>-1*Math.log((e+8.01)/(8.01-e));let e=1/3,t=8/Math.pow(8,e);r=-Math.pow(-r,e)*t}let o=e.scaleLinear().domain([0,1]).range([-r,r]),l=e.range(51).map((e=>e/50)).map(o).map(i),s=e.extent(l),c=e.scaleLinear().domain(s).range([0,1]),m=l.map(c),_=e.range(51).map((e=>n*(50-e)/50));return e.scaleLinear().domain(m).range(_)}}function k(e,t,a,n,i,r,o,l,s,c,m,_,u){return function(f,d,h,p=0,g=!1,v=0){let b=h.comparison_columns[p].u_probabilities.length;const y=e.svg(f,d),w=t.select(y),x=w.append("g").attr("transform","translate("+a.left+","+a.top+")").attr("class","outer_group");let k=n(h,p),E=i(k),A=E.m_u,q=r(b),z=r(b);"level_names"in h&&(z=h.level_names);let L=o(E),M=f-a.left-a.right,O=d-a.top-a.bottom,j=l.range([-8,8],{step:.1,label:"Axis compression",value:v});g||(j.style.display="none");let F=s(j.value,f,M),G=c(j.value,d,O),J=m`

  ${j}
  ${w.node()}
  `,N={x:F,y:G,svg:x,svg_outer:w,unstacked_data:k,stacked_data:E,level_keys:q,level_names:z,level_colours:L,final_output:J,axis_slider:j,internal_height:O,internal_width:M,width:f,height:d};x.on(".drag",null);let T=x.selectAll("g").data(A).join("g").attr("fill",(e=>L(e.key))).attr("class",(e=>e.key)).classed("inner_group","true");T.selectAll("rect").data((e=>e)).join("rect").attr("stroke","white").attr("stroke-width","2px").classed("m_u_areas","true"),T.selectAll("text").data((e=>e)).join("text").attr("text-anchor","middle").attr("dy","0.5em").style("font-size","0.8em").attr("pointer-events","none").style("font-family","sans-serif").classed("m_u_labels","true");_(j.value);return x.append("g").attr("class","x_axis_group"),x.append("g").attr("class","y_axis_group"),T.selectAll("text.chart_title").remove(),T.append("text").text("Distribution of m and u values").attr("y",-60).attr("x",M/2).attr("class","chart_title").attr("text-anchor","middle").attr("dy","0.5em").style("font-size","1em").style("font-weight","bold").attr("pointer-events","none").style("fill","black").style("font-family","sans-serif"),T.append("text").text("✨ Drag within rectangles to change values ✨").attr("y",-20).attr("x",M/2).attr("class","chart_title").attr("text-anchor","middle").attr("dy","0.5em").style("font-size","0.8em").attr("pointer-events","none").style("fill","red").style("font-family","sans-serif"),T.append("text").text("The area represents all record comparisons, split into levels by match status").attr("y",-40).attr("x",M/2).attr("class","chart_title").attr("text-anchor","middle").attr("dy","0.5em").style("font-size","0.8em").attr("pointer-events","none").style("fill","black").style("font-family","sans-serif"),u(N),t.select(j).on("input",(e=>{u(N)})),J.value=k,J}}function E(e){return e}function A(e,t,a,n,i,r,o,l){return function s(c){let m=c,_=m.unstacked_data,u=m.svg,f=(m.svg_outer,m.stacked_data),d=f.m_u,h=m.level_keys,p=m.level_names,g=m.axis_slider,v=g.value,b=m.internal_height,y=m.internal_width,w=m.width,x=m.height;m.x=e(v,w,y),m.y=t(v,x,b);let k=u.selectAll(".inner_group").data(d).join("g").attr("fill",(e=>m.level_colours(e.key)));k.selectAll("rect.m_u_areas").data((e=>e)).join("rect").attr("x",(e=>a(e.data.match_status,m.stacked_data.lam,m.x)(e.data.match_status))).attr("y",(e=>m.y(e[1]))).attr("height",(e=>m.y(e[0])-m.y(e[1]))).attr("width",(e=>a(e.data.match_status,_.lam,m.x).bandwidth())).call(n(c,s)),k.selectAll("text.m_u_labels").data((e=>e)).join("text").attr("x",(e=>a(e.data.match_status,f.lam,m.x)(e.data.match_status)+a(e.data.match_status,f.lam,m.x).bandwidth()/2)).attr("y",(e=>(m.y(e[1])+m.y(e[0]))/2)).text((e=>i(e,h,p))).style("fill","black"),k.selectAll("text.axis_match_label").remove(),k.selectAll("text.axis_match_label").data([{text:"Record comparisons which are non-matches",x:[0,1-_.lam]},{text:"Record comparisons which are matches",x:[1-_.lam,1]}]).join("text").text((e=>e.text)).attr("y",m.y(0)+40).attr("x",(e=>(m.x(e.x[0])+m.x(e.x[1]))/2)).attr("class","axis_match_label").attr("text-anchor","middle").attr("dy","0.5em").style("font-size","0.8em").attr("pointer-events","none").style("fill","black").style("font-family","sans-serif");let E=r(g.value);u.selectAll(".x_axis_group").attr("transform","translate(0,"+b+")").call(o.axisBottom(m.x).tickValues(E).tickFormat(l)),u.selectAll(".y_axis_group").call(o.axisLeft(m.y).tickValues(E).tickFormat(l))}}function q(e,t,a){return{proportion_of_matches:.3,comparison_columns:[{col_name:"my column",m_probabilities:e(t.range(1,a+1,1)),u_probabilities:e(t.range(a,0,-1))}]}}function z(){return function(e,t=0){let a={lam:e.proportion_of_matches,m_u:[null,null]},n=e.comparison_columns[t].u_probabilities;a.m_u[0]={match_status:"non-match",match_index:0},n.forEach(((e,t)=>a.m_u[0]["level_"+t]=e));let i=e.comparison_columns[t].m_probabilities;return a.m_u[1]={match_status:"match",match_index:1},i.forEach(((e,t)=>a.m_u[1]["level_"+t]=e)),a}}function L(){return function(e){let t=[1e-10,1e-9,1e-8,1e-7,1e-6,1e-5,1e-4,.001,.01,.1,.5,.9,.99,.999,.9999,.99999,.999999,1-1e-7,1-1e-8,1-1e-9,1-1e-10],a=Math.floor(.65*e),n=t.indexOf(.5),i=n-a,r=n+a;return e>2.5?[0].concat(t.slice(i,r+1)).concat([1]):null}}function M(e){return function(t,a,n){let i=t.key,r=n[a.indexOf(i)],o=t.data.match_status,l=e.format(",.2%")(t.data[t.key]);return r=r.replace("_"," "),r=r.charAt(0).toUpperCase()+r.slice(1),`${r}: ${l} of ${o}es`}}function O(e){return function(t,a,n){if(0==t)return e.scaleLinear().domain([0,1]).range([0,n]);let i,r=t;if(r>=0)i=e=>Math.pow(5,e)/(Math.pow(5,e)+1);else{i=e=>-1*Math.log((e+8.01)/(8.01-e));let e=1/3,t=8/Math.pow(8,e);r=-Math.pow(-r,e)*t}let o=e.scaleLinear().domain([0,1]).range([-r,r]),l=e.range(51).map((e=>e/50)).map(o).map(i),s=e.extent(l),c=e.scaleLinear().domain(s).range([0,1]),m=l.map(c),_=e.range(51).map((e=>n*e/50));return e.scaleLinear().domain(m).range(_)}}function j(e){return function(t){let a=e.schemeGnBu;return a[2]=[a[3][0],a[3][2]],e.scaleOrdinal().domain(t.m_u.map((e=>e.key))).range(a[t.m_u.length])}}function F(e,t,a,n,i){return function(r,o){return e.drag().on("drag",(function(e){r.unstacked_data.lam=t(e,r),r.unstacked_data.m_u=a(e,r);let l=n(r.unstacked_data);r.stacked_data=l,r.final_output.value=r.unstacked_data,o(r),r.final_output.dispatchEvent(new i("input"))}))}}function G(){return function(e,t){let a=t.x,n=a(t.unstacked_data.lam),i=a.invert(n-e.dx);return i=Math.min(i,1),i=Math.max(i,0),i}}function J(){return function(e,t){let a,n,i,r,o=t.level_keys,l=t.stacked_data,s=t.y,c=t.unstacked_data.m_u,m=e.subject.key,_=o.indexOf(m),u=e.subject.data.match_index,f=l.m_u[_][u],d=f[0],h=f[1],p=(s(d)+s(h))/2;a=e.y<p,a?(n=_+1,i=!1):(n=_+-1,i=!0),0==_&&(n=1,i=!1),_==o.length-1&&(n=o.length-2,i=!0),r=i?d:h;let g=s(r),v=g+e.dy,b=s.invert(g),y=s.invert(v)-b;i||(y=-y);let w=o[n],x=c[u][m]-y,k=c[u][w]+y;function E(e,t,a){return(e-t)*(e-a)<=0}return E(x,0,1)&&E(k,0,1)&&(c[u][m]=x,c[u][w]=k),c}}function N(){return{top:80,right:60,bottom:60,left:60}}function T(e){return function(t,a,n){let i=e.scaleBand().domain(["match"]).range([n(1-a),n(1)]).padding(0),r=e.scaleBand().domain(["non-match"]).range([n(0),n(1-a)]).padding(0);return"match"==t?i:r}}function $(e){return function(t){let a=t.m_u[0].length,n=e(a),i=n.map((e=>t.m_u[1][e])),r=n.map((e=>t.m_u[0][e]));return{proportion_of_matches:t.lam,comparison_columns:[{col_name:"my column",m_probabilities:i,u_probabilities:r,num_levels:n.length}]}}}function B(){return 500}function R(e,t){return function(a){let n=e(a),i=t.stack().keys(n).order(t.stackOrderNone).offset(t.stackOffsetNone)(a.m_u);return i=i.map((e=>(e.forEach((t=>t.key=e.key)),e))),{lam:a.lam,m_u:i}}}function W(){return function(e){return Object.keys(e.m_u[0]).filter((e=>e.includes("level_")))}}function C(e,t){return function(a){let n=e(a).length,i=t(n),r=i.map((e=>a.m_u[1][e])),o=i.map((e=>a.m_u[0][e]));return{proportion_of_matches:a.lam,comparison_columns:[{col_name:" ",m_probabilities:r,u_probabilities:o,num_levels:i.length}]}}}function S(e){return function(t){return e.range(t).map((e=>"level_"+e))}}function I(){return function(e){return e.toString()}}function D(){return function(e){let t=e.reduce(((e,t)=>e+t),0);return e.map((e=>e/t))}}function P(e,t,a){return function(n){e(n);let i={proportion_of_matches:.3,comparison_columns:[{col_name:" ",m_probabilities:null,u_probabilities:null}]},r=(t.range(1,n+1).reduce(((e,t)=>e+t),0),t.range(1,n+1,1).map((e=>e**2)));r=a(r);let o=t.range(n,0,-1).map((e=>e**2));return o=a(o),i.comparison_columns[0].m_probabilities=r,i.comparison_columns[0].u_probabilities=o,i}}function U(e){return e`#### External fns`}function V(e){return e`#### External libs`}function Z(e){return e("@observablehq/inputs")}function K(e){return e("d3@6")}function Y(e,t){const a=e.module();a.variable(t()).define(["md"],v),a.variable(t("viewof num_levels")).define("viewof num_levels",["inputs"],b),a.variable(t("num_levels")).define("num_levels",["Generators","viewof num_levels"],((e,t)=>e.input(t))),a.variable(t()).define(["md"],y),a.variable(t("viewof thing")).define("viewof thing",["m_u_input_control","width","height","starting_data"],w),a.variable(t("thing")).define("thing",["Generators","viewof thing"],((e,t)=>e.input(t))),a.variable(t("gen_y_scale")).define("gen_y_scale",["d3"],x),a.variable(t("m_u_input_control")).define("m_u_input_control",["DOM","d3","margin","splink_data_to_unstacked_data","unstacked_data_to_stacked","num_levels_to_level_keys","get_level_colours_scale","inputs","gen_x_scale","gen_y_scale","html","get_tick_vals","redraw"],k),a.variable(t()).define(["thing"],E),a.variable(t("redraw")).define("redraw",["gen_x_scale","gen_y_scale","get_scale","get_drag","get_label","get_tick_vals","d3","format_tick"],A),a.variable(t("starting_data")).define("starting_data",["normalise","d3","num_levels"],q),a.variable(t("splink_data_to_unstacked_data")).define("splink_data_to_unstacked_data",z),a.variable(t("get_tick_vals")).define("get_tick_vals",L),a.variable(t("get_label")).define("get_label",["d3"],M),a.variable(t("gen_x_scale")).define("gen_x_scale",["d3"],O),a.variable(t("get_level_colours_scale")).define("get_level_colours_scale",["d3"],j),a.variable(t("get_drag")).define("get_drag",["d3","get_lam","get_m_u","unstacked_data_to_stacked","Event"],F),a.variable(t("get_lam")).define("get_lam",G),a.variable(t("get_m_u")).define("get_m_u",J),a.variable(t("margin")).define("margin",N),a.variable(t("get_scale")).define("get_scale",["d3"],T),a.variable(t("input_control")).define("input_control",["num_levels_to_level_keys"],$),a.variable(t("height")).define("height",B),a.variable(t("unstacked_data_to_stacked")).define("unstacked_data_to_stacked",["level_keys_from_unstacked_data","d3"],R),a.variable(t("level_keys_from_unstacked_data")).define("level_keys_from_unstacked_data",W),a.variable(t("input_control_data_to_splink_settings")).define("input_control_data_to_splink_settings",["level_keys_from_unstacked_data","num_levels_to_level_keys"],C),a.variable(t("num_levels_to_level_keys")).define("num_levels_to_level_keys",["d3"],S),a.variable(t("format_tick")).define("format_tick",I),a.variable(t("normalise")).define("normalise",D),a.variable(t("gen_starting_data")).define("gen_starting_data",["num_levels_to_level_keys","d3","normalise"],P),a.variable(t()).define(["md"],U);const n=e.module(g);return a.import("get_m_u_chart",n),a.import("get_bayes_factor_chart",n),a.variable(t()).define(["md"],V),a.variable(t("inputs")).define("inputs",["require"],Z),a.variable(t("d3")).define("d3",["require"],K),a}function H(e){return e`# Dependencies between match weights`}function Q(e){return e`*A final version of this notebook can be viewed on my blog [here](https://www.robinlinacre.com/match_weight_dependencies/).*`}function X(e){return e`The values of a column's match weights are interdependent:  Only certain combinations of values are possible.  

Some types of data also result in maximum and minimum match weights.

Understanding why these constraints occur can help you build better models, because it can help you find ways to extract more information from your comparison columns.

This article tries to build an intuition for why these constraints occur and why they matter.
`}function ee(e,t){return e`## Example of a maximum match weight:  Gender
Consider a column for gender, and let's assume there's an equal split of males and females in our data.

A match on gender does not provide strong evidence in favour of a match because it's common to observe a match on gender amongst non-matching records.

This suggests there is an upper bound on the Bayes Factor for gender.  It turns out that, for this data, the maximum Bayes Factor is 2.0.

 Let's explore what this looks like visually, which will reveal the constraint.  Note that:

- Amongst non-matching records, the gender field is just as likely to match as to mismatch, i.e.  ${t`u_\text{gender, level 0} = 0.5`} and ${t`u_\text{gender, level 1} = 0.5`}.

-  ✨You can drag within the rectangles of the following diagram to see the effect of different m and u values on match weights✨
`}function te(e,t,a,n){return t(a,400,n,0,1)}function ae(e){return e.button("Reset gender values")}function ne(e,t,a){return e(t(a))}function ie(e){return e`### Observations

Two important findings emerge from this example:

- There is a maximum bound of 2 on the match weight associated with a match on gender.  This is intuitive:  a match weight of two means that, if we observe a match on gender, it's now twice as likely that the records are a match - reflecting the equal split of genders.

- There is no minimum bound of the match weight associated with a mismatch on gender.  This is also intuitive.  If gender is recorded with very high accuracy, then a mismatch on gender represents very strong evidence against a match.
`}function re(e){return e`## Example of a minimum match weights:  Forename

Consider a forename column.  Let's assume that nicknames, diminutives are common in this dataset.  For example, it may be common for someone called 'Jonathan' to appear variously as 'Jonathan', 'John' or 'Jonny'.  As such, it will be common that, amongst matches, the forename does not exactly match.

Consider the following chart, which models this column with two comparison levels:
- Level 1: Forename matches exactly
- Level 0: Forname mismatches 

In this scenario, the observation of a mismatch on forename does not provide strong evidence against a match, because it is so common to observe a mismatch amongst matching records.  
`}function oe(e,t,a,n){return t(a,400,n,0,3)}function le(e){return e.button("Reset forename values")}function se(e,t,a){return e(t(a))}function ce(e){return e`Using a more sophisticted modelling approach, we can do better.

Let's assume that we can capture the vast majority of nicknames and diminutives using a fuzzy matching function.  This allows us to draw a distinction between two scenarios:
- Values do not match, but are similar
- Values do not match, and are completely different.

We now set up our levels as follows:
- Level 2: Exact match on forename
- Level 1: Fuzzy match on forename
- Level 0: Forename mismatches


`}function me(e,t,a,n){return t(a,400,n,0,3)}function _e(e){return e.button("Reset forename values")}function ue(e,t,a){return e(t(a))}function fe(e){return e`## Observations

- When we modelled two levels, two names that fuzzy matched (John vs Jonny) would have been assigned the same negative match weight as two names which were completely different (John vs Robin).  We therefore lost information
- When we model three levels, a much stronger negative weight on a mismatch is possible.  This is because the lowest level (level_0) now contains only names which are completely different, rather than being a mix of fuzzy matching names, and names which are competely different.

Modelling three levels thereby allows us to extract substantially more information from the data.
`}function de(){return{proportion_of_matches:.3,comparison_columns:[{col_name:"gender",m_probabilities:[.1,.9],u_probabilities:[.5,.5]}],level_names:["Gender mismatches","Gender matches"]}}function he(){return{proportion_of_matches:.3,comparison_columns:[{col_name:"gender",m_probabilities:[.3,.7],u_probabilities:[.9,.1]}],level_names:["Forname mismatches","Forename matches exactly"]}}function pe(){return{proportion_of_matches:.3,comparison_columns:[{col_name:"gender",m_probabilities:[.05,.25,.7],u_probabilities:[.75,.15,.1]}],level_names:["Forname mismatches","Forename fuzzy matches","Forename matches"]}}function ge(e){return e("@observablehq/inputs")}function ve(e,t){const a=e.module();a.variable(t("title")).define("title",["md"],H),a.variable(t()).define(["md"],Q),a.variable(t("para_1")).define("para_1",["md"],X),a.variable(t("para_2")).define("para_2",["md","tex"],ee),a.variable(t("viewof gen")).define("viewof gen",["reset_gender","m_u_input_control","width","settings_gender"],te),a.variable(t("gen")).define("gen",["Generators","viewof gen"],((e,t)=>e.input(t))),a.variable(t("viewof reset_gender")).define("viewof reset_gender",["inputs"],ae),a.variable(t("reset_gender")).define("reset_gender",["Generators","viewof reset_gender"],((e,t)=>e.input(t))),a.variable(t("bf_chart_gender")).define("bf_chart_gender",["get_bayes_factor_chart","input_control_data_to_splink_settings","gen"],ne),a.variable(t("para_3")).define("para_3",["md"],ie),a.variable(t("para_4")).define("para_4",["md"],re),a.variable(t("viewof fn1")).define("viewof fn1",["reset_fn1","m_u_input_control","width","settings_forename_1"],oe),a.variable(t("fn1")).define("fn1",["Generators","viewof fn1"],((e,t)=>e.input(t))),a.variable(t("viewof reset_fn1")).define("viewof reset_fn1",["inputs"],le),a.variable(t("reset_fn1")).define("reset_fn1",["Generators","viewof reset_fn1"],((e,t)=>e.input(t))),a.variable(t("bf_chart_fn_1")).define("bf_chart_fn_1",["get_bayes_factor_chart","input_control_data_to_splink_settings","fn1"],se),a.variable(t("para_5")).define("para_5",["md"],ce),a.variable(t("viewof fn2")).define("viewof fn2",["reset_fn2","m_u_input_control","width","settings_forename_2"],me),a.variable(t("fn2")).define("fn2",["Generators","viewof fn2"],((e,t)=>e.input(t))),a.variable(t("viewof reset_fn2")).define("viewof reset_fn2",["inputs"],_e),a.variable(t("reset_fn2")).define("reset_fn2",["Generators","viewof reset_fn2"],((e,t)=>e.input(t))),a.variable(t("bf_chart_fn_2")).define("bf_chart_fn_2",["get_bayes_factor_chart","input_control_data_to_splink_settings","fn2"],ue),a.variable(t("para_6")).define("para_6",["md"],fe),a.variable(t("settings_gender")).define("settings_gender",de),a.variable(t("settings_forename_1")).define("settings_forename_1",he),a.variable(t("settings_forename_2")).define("settings_forename_2",pe),a.variable(t("inputs")).define("inputs",["require"],ge);const n=e.module(Y);a.import("m_u_input_control",n),a.import("input_control_data_to_splink_settings",n);const i=e.module(g);return a.import("get_m_u_chart",i),a.import("get_bayes_factor_chart",i),a}var be=a(5860);const ye=["title","para_1","para_2","viewof gen","viewof reset_gender","bf_chart_gender","para_3","para_4","viewof fn1","viewof reset_fn1","bf_chart_fn_1","para_5","viewof fn2","viewof reset_fn2","bf_chart_fn_2","para_6"];function we(e){return n.createElement(be.Z,{notebook:ve,cells:ye})}var xe=function(e){return void 0===e&&(e={}),n.createElement(i.pY,e,n.createElement(we,e))}},5860:function(e,t,a){var n=a(7294),i=a(6493);const r="mdx-container-div",o=new i.Zu,l=Object.assign({},o,{width:function(){return o.Generators.observe((e=>{let t=e(document.getElementById(r).clientWidth);function a(){let a=document.getElementById(r).clientWidth;a!==t&&e(t=a)}return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)}))}});t.Z=function(e){let{notebook:t,cells:a,customClassName:r}=e;const o=(0,n.useRef)(a.map((()=>n.createRef())));return(0,n.useEffect)((()=>{const e=new i.r_(l);return e.module(t,(e=>{const t=a.indexOf(e);if(-1!==t)return new i.lj(o.current[t].current)})),()=>e.dispose()}),[t,a]),n.createElement("div",{className:r},o.current.map(((e,t)=>n.createElement("div",{key:t,ref:e}))))}}}]);
//# sourceMappingURL=component---src-mdx-match-weight-dependencies-mdx-c69bfd19f9958296133c.js.map