---
title: "The maths"
description: "desc"
post_date: "2023-09-20"
post_category: "probabilistic_linkage"
code_url: "https://observablehq.com/@robinl/d51533bbe054b3d8"
prob_linkage_category: "tutorial"
tutorial_number: 2
---

export { MDXLayout as default } from '../components/MDXLayout';
import { SEO } from "../components/SEO"

export const Head = ( props ) => <SEO frontmatter={props.pageContext.frontmatter} />;

import {ObservableCell, WithObservableProvider}   from '../components/ObservableCells';
import { partial_match_weight } from "../components/Definitions";
import TutorialNav from '../components/TutorialNav';
import CompactTutorialNav from '../components/CompactTutorialNav';

<CompactTutorialNav frontmatter={props.pageContext.frontmatter} />

# The Maths of Fellegi Sunter: Partial Match Weights

We saw in the previous article that the Fellegi-Sunter model makes its predictions with a simple calculation: a sum of the partial match weights.

But what are these partial match rates and where do they come from?

This article:

- Describes the concept of partial match weights
- Introduces the concept of m and u values, and how they determine of partial match weights
- Explains the relationship between m and u values, Bayes Factors, and probabilities
- Shows an example of how the model is computed for real data.

## Partial match weights

Some columns are more important than others to the calculation of overall match probability. For example:

-  a match on date of birth provides stronger evidence in favour of a match than a match on gender.
-  a mismatch on date of birth may provide more evidence against a match than a mismatch on address (because people move house)

This is quantified by the {partial_match_weight}s.



When part of the information in two records is compared, a partial match weight quantifies the strength of evidence in favour or against these two records being a match.

For example, suppose we have data relating to people as follows:

| First Name | Surname  | Date of Birth | Gender |
|------------|----------|---------------|--------|
| John       | Doe      | 1990-07-20    | Male   |
| Jane       | Smith    | 1985-12-05    | Female |


 We may wish to compute partial match weights for first name.

The modeller must begin by defining how the information in the records will be compared.

For example, for first name, we may place the comparison in one of four categories (in Splink, these are known as `ComparisonLevels`):

1. First names are identical
2. First names are similar (e.g. using [Jaro Winkler](https://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance#Jaro%E2%80%93Winkler_similarity))
3. All other cases

In a typical model, the estimated partial match weights may look like this:

[Add in chart here]

Positive partial match weights mean evidence in favour of a match, negative weights mean evidence against a match.

Hover over the chart for tooltips.

Separately, we will also estimate partial match weights for the surname column, the date of birth column and the gender column.

Note that the number and definition of partial match weights can vary depending on the type of information.  For example, for gender we'd likely have two weights: match, and non-match.  For date of birth, we would define similarity differently to first name.

[Add in full partial match weights chart]

## Intuitive interpretations of partial match weights

In the chart, we can see that the partial match weight associated with an exact match on date of birth is stronger than the partial match weight associated with gender.

This should be intuitive: if we observe that gender matches in two records, this is not as strong evidence in favour of a match as observing that the date of birth matches.

Negative partial match weights can also be intuitive:  We may know that gender is recorded with a high degree of precision, but surname is commonly subject to typos or other errors.  In this case, we would expect a non-match on gender to provide stronger evidence against a match than a non-match on surname.

## m and u probabilities: the building blocks of partial match weights

Partial match weights are

