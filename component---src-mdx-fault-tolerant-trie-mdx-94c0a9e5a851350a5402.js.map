{"version":3,"file":"component---src-mdx-fault-tolerant-trie-mdx-94c0a9e5a851350a5402.js","mappings":"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","sources":["webpack://robinlinacre/./node_modules/@robinl/fault-tolerant-trie/a2e58f97fd5e8d7c@756.js","webpack://robinlinacre/./node_modules/@robinl/fault-tolerant-trie/965ed303c3f15178@322.js","webpack://robinlinacre/./src/mdx/fault_tolerant_trie.mdx","webpack://robinlinacre/./src/components/ObservableCells.jsx","webpack://robinlinacre/./src/hooks/use-site-metadata.jsx","webpack://robinlinacre/./src/components/SEO.jsx","webpack://robinlinacre/./src/components/Subtitle.jsx","webpack://robinlinacre/./src/mdx/address_matching/AddressCandidateComparison.jsx","webpack://robinlinacre/./src/mdx/address_matching/AddressComparison.jsx"],"sourcesContent":["function _1(md){return(\nmd`# Introduction to inputs\n\nThese lightweight interface components — buttons, sliders, dropdowns, tables, and the like — help you explore data and build interactive displays. For a walkthrough of how you might use these to support data analysis, see [Hello, Inputs!](/@observablehq/hello-inputs)`\n)}\n\nfunction _usage(md){return(\nmd`---\n## Usage\n\nDeclare your inputs with [viewof](/@observablehq/introduction-to-views), like so:`\n)}\n\nfunction _gain(Inputs){return(\nInputs.range([0, 11], {value: 5, step: 0.1, label: \"Gain\"})\n)}\n\nfunction _now(md){return(\nmd`Now you can reference the input’s value (here *gain*) in any cell, and the cell will run whenever the input changes. No event listeners required!`\n)}\n\nfunction _gain2(gain){return(\ngain\n)}\n\nfunction _currentgain(gain,md){return(\nmd`The current gain is ${gain.toFixed(1)}!`\n)}\n\nfunction _7(md){return(\nmd`Observable Inputs are released under the [ISC license](https://github.com/observablehq/inputs/blob/main/LICENSE) and depend only on [Hypertext Literal](/@observablehq/htl), our tagged template literal for safely generating dynamic HTML. If you are interested in contributing or wish to report an issue, please see [our repository](https://github.com/observablehq/inputs). For recent changes, please see [our release notes](https://github.com/observablehq/inputs/releases).`\n)}\n\nfunction _basics(md){return(\nmd`---\n\n## Basics\n\nThese basic inputs will get you started.\n\n* [Button](/@observablehq/input-button) - do something when a button is clicked\n* [Toggle](/@observablehq/input-toggle) - toggle between two values (on or off)\n* [Checkbox](/@observablehq/input-checkbox) - choose any from a set\n* [Radio](/@observablehq/input-radio) - choose one from a set\n* [Range](/@observablehq/input-range) or [Number](/@observablehq/input-range) - choose a number in a range (slider)\n* [Select](/@observablehq/input-select) - choose one or any from a set (drop-down menu)\n* [Text](/@observablehq/input-text) - enter freeform single-line text\n* [Textarea](/@observablehq/input-textarea) - enter freeform multi-line text\n* [Date](/@observablehq/input-date) or [Datetime](/@observablehq/input-date) - choose a date\n* [Color](/@observablehq/input-color) - choose a color\n* [File](/@observablehq/input-file) - choose a local file`\n)}\n\nfunction _button(md){return(\nmd`---\n\n### [Button](/@observablehq/input-button) \n\nDo something when a button is clicked. [Examples ›](/@observablehq/input-button) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#button)`\n)}\n\nfunction _clicks(Inputs){return(\nInputs.button(\"Click me\")\n)}\n\nfunction _11(clicks){return(\nclicks\n)}\n\nfunction _toggle(md){return(\nmd`---\n\n### [Toggle](/@observablehq/input-toggle) \n\nToggle between two values (on or off). [Examples ›](/@observablehq/input-toggle) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#toggle)`\n)}\n\nfunction _mute(Inputs){return(\nInputs.toggle({label: \"Mute\"})\n)}\n\nfunction _14(mute){return(\nmute\n)}\n\nfunction _checkbox(md){return(\nmd`---\n\n### [Checkbox](/@observablehq/input-checkbox) \n\nChoose any from a set. [Examples ›](/@observablehq/input-checkbox) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#checkbox)`\n)}\n\nfunction _flavors(Inputs){return(\nInputs.checkbox([\"salty\", \"sweet\", \"bitter\", \"sour\", \"umami\"], {label: \"Flavors\"})\n)}\n\nfunction _17(flavors){return(\nflavors\n)}\n\nfunction _radio(md){return(\nmd`---\n\n### [Radio](/@observablehq/input-radio)\n\nChoose one from a set. [Examples ›](/@observablehq/input-radio) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#radio)`\n)}\n\nfunction _flavor(Inputs){return(\nInputs.radio([\"salty\", \"sweet\", \"bitter\", \"sour\", \"umami\"], {label: \"Flavor\"})\n)}\n\nfunction _20(flavor){return(\nflavor\n)}\n\nfunction _range(md){return(\nmd`---\n\n### [Range](/@observablehq/input-range)\n\nPick a number. [Examples ›](/@observablehq/input-range) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#range)`\n)}\n\nfunction _n(Inputs){return(\nInputs.range([0, 255], {step: 1, label: \"Favorite number\"})\n)}\n\nfunction _23(n){return(\nn\n)}\n\nfunction _select(md){return(\nmd`---\n\n### [Select](/@observablehq/input-select)\n\nChoose one, or any, from a menu. [Examples ›](/@observablehq/input-select) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#select)`\n)}\n\nfunction _homeState(Inputs,stateNames){return(\nInputs.select([null].concat(stateNames), {label: \"Home state\"})\n)}\n\nfunction _26(homeState){return(\nhomeState\n)}\n\nfunction _visitedStates(Inputs,stateNames){return(\nInputs.select(stateNames, {label: \"Visited states\", multiple: true})\n)}\n\nfunction _28(visitedStates){return(\nvisitedStates\n)}\n\nfunction _29(md){return(\nmd`---\n\n### [Text](/@observablehq/input-text)\n\nEnter freeform single-line text. [Examples ›](/@observablehq/input-text) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#text)`\n)}\n\nfunction _name(Inputs){return(\nInputs.text({label: \"Name\", placeholder: \"What’s your name?\"})\n)}\n\nfunction _31(name){return(\nname\n)}\n\nfunction _32(md){return(\nmd`---\n\n### [Textarea](/@observablehq/input-textarea)\n\nEnter freeform multi-line text. [Examples ›](/@observablehq/input-textarea) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#textarea)`\n)}\n\nfunction _bio(Inputs){return(\nInputs.textarea({label: \"Biography\", placeholder: \"What’s your story?\"})\n)}\n\nfunction _34(bio){return(\nbio\n)}\n\nfunction _35(md){return(\nmd`---\n\n### [Date](/@observablehq/input-date)\n\nChoose a date, or a date and time. [Examples ›](/@observablehq/input-date) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#date)`\n)}\n\nfunction _birthday(Inputs){return(\nInputs.date({label: \"Birthday\"})\n)}\n\nfunction _37(birthday){return(\nbirthday\n)}\n\nfunction _38(md){return(\nmd`---\n\n### [Color](/@observablehq/input-color)\n\nChoose a color. [Examples ›](/@observablehq/input-color) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#color)`\n)}\n\nfunction _color(Inputs){return(\nInputs.color({label: \"Favorite color\", value: \"#4682b4\"})\n)}\n\nfunction _40(color){return(\ncolor\n)}\n\nfunction _41(md){return(\nmd`---\n\n### [File](/@observablehq/input-file)\n\nChoose a local file. [Examples ›](/@observablehq/input-file) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#file)`\n)}\n\nfunction _file(Inputs){return(\nInputs.file({label: \"CSV file\", accept: \".csv\", required: true})\n)}\n\nfunction _data(file){return(\nfile.csv({typed: true})\n)}\n\nfunction _tables(md){return(\nmd`---\n\n## Tabular data\n\nThese fancy inputs are designed to work with tabular data such as CSV or TSV [file attachments](/@observablehq/file-attachments) and [database clients](/@observablehq/databases).\n\n* [Search](/@observablehq/input-search) - query a tabular dataset\n* [Table](/@observablehq/input-table) - browse a tabular dataset`\n)}\n\nfunction _45(md){return(\nmd`---\n\n### [Search](/@observablehq/input-search)\n\nQuery a tabular dataset. [Examples ›](/@observablehq/input-search) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#search)`\n)}\n\nfunction _search(Inputs,capitals){return(\nInputs.search(capitals, {placeholder: \"Search U.S. capitals\"})\n)}\n\nfunction _47(search){return(\nsearch\n)}\n\nfunction _48(md){return(\nmd`---\n\n### [Table](/@observablehq/input-table)\n\nBrowse a tabular dataset. [Examples ›](/@observablehq/input-table) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#table)`\n)}\n\nfunction _rows(Inputs,search){return(\nInputs.table(search)\n)}\n\nfunction _50(rows){return(\nrows\n)}\n\nfunction _techniques(md){return(\nmd`---\n\n## And more!\n\nGot the basics? Here are a few more advanced techniques:\n\n* [Form](https://observablehq.com/@observablehq/input-form?collection=@observablehq/inputs) - combine multiple inputs for a compact display\n* [Synchronized inputs](https://observablehq.com/@observablehq/synchronized-inputs?collection=@observablehq/inputs) - bind two or more inputs\n* [Introduction to Views](/@observablehq/introduction-to-views) - more on Observable’s viewof`\n)}\n\nfunction _52(md){return(\nmd`We are grateful to Jeremy Ashkenas for blazing the trail with [“The Grand Native Inputs Bazaar”](/@jashkenas/inputs). To migrate from Jeremy’s inputs to our new official inputs, consider our [legacy inputs](/@observablehq/legacy-inputs).`\n)}\n\nfunction _53(md){return(\nmd`For even more, consider these “friends & family” inputs and techniques shared by the Observable community:`\n)}\n\nfunction _54(Inputs,html){return(\nInputs.table([\n  [[\"2D Slider\", \"/d/98bbb19bf9e859ee\"], \"Fabian Iwand\", \"a two-dimensional range\"],\n  [[\"Binary Input\", \"/@rreusser/binary-input\"], \"Ricky Reusser\", \"bitwise IEEE floating point\"],\n  [[\"DIY inputs\", \"/@bartok32/diy-inputs\"], \"Bartosz Prusinowski\", \"inputs with fun, custom styles\"],\n  [[\"FineRange\", \"/@rreusser/fine-range\"], \"Ricky Reusser\", \"high-precision numeric control\"],\n  [[\"Form Input\", \"/@mbostock/form-input\"], \"Mike Bostock\", \"multiple inputs in single cell\"],\n  [[\"Inputs\", \"/@jashkenas/inputs\"], \"Jeremy Ashkenas\", \"the original\"],\n  [[\"Player\", \"/@oscar6echo/player\"], \"oscar6echo\", \"detailed timing control for animation\"],\n  [[\"Scrubber\", \"/@mbostock/scrubber\"], \"Mike Bostock\", \"play/pause/scrub control for animation\"],\n  [[\"Range Slider\", \"/@mootari/range-slider\"], \"Fabian Iwand\", \"a two-ended range\"],\n  [[\"Ternary Slider\", \"/@yurivish/ternary-slider\"], \"Yuri Vishnevsky\", \"a proportion of three values\"],\n  [[\"Data driven range sliders\", \"/@bumbeishvili/data-driven-range-sliders\"], \"David B.\", \"a range input with a histogram\"],\n  [[\"Snapping Histogram Slider\", \"/@trebor/snapping-histogram-slider\"], \"Robert Harris\", \"a range input with a histogram\"],\n  [[\"Inputs in grid\", \"/@bumbeishvili/input-groups\"], \"David B.\", \"combine multiple inputs into a compact grid\"],\n  [[\"List Input\", \"/@harrislapiroff/list-input\"], \"Harris L.\", \"enter more than one of something\"],\n  [[\"Copier\", \"/@mbostock/copier\"], \"Mike Bostock\", \"a button to copy to the clipboard\"],\n  [[\"Tangle\", \"/@mbostock/tangle\"], \"Mike Bostock\", \"Bret Victor-inspired inline scrubbable numbers\"],\n  [[\"Editor\", \"/@cmudig/editor\"], \"CMU Data Interaction Group\", \"code editor with syntax highlighting\"],\n  [[\"Color Scheme Picker\", \"/@zechasault/color-schemes-and-interpolators-picker\"], \"Zack Ciminera\", \"pick a D3 color scheme\"],\n  [[\"Easing Curve Editor\", \"/@nhogs/easing-graphs-editor\"], \"Nhogs\", \"create a custom easing curve\"]\n].map(([Name, Author, Description]) => ({Name, Author, Description})), {\n  sort: \"Name\",\n  rows: Infinity,\n  layout: \"auto\",\n  width: {\n    \"Description\": \"60%\"\n  },\n  format: {\n    Name: ([title, link]) => html`<a href=${link} target=_blank>${title}`\n  }\n})\n)}\n\nfunction _55(md){return(\nmd`To share your reusable input or technique, please leave a comment.`\n)}\n\nfunction _56(md){return(\nmd`---\n\n## Appendix`\n)}\n\nfunction _capitals(FileAttachment){return(\nFileAttachment(\"us-state-capitals.tsv\").tsv({typed: true})\n)}\n\nfunction _stateNames(capitals){return(\ncapitals.map(d => d.State)\n)}\n\nfunction _59(md){return(\nmd`The cells below provide deprecated aliases for older versions of Inputs. Please use Inputs.button *etc.* instead of importing from this notebook.`\n)}\n\nfunction _Button(Inputs){return(\nInputs.button\n)}\n\nfunction _Toggle(Inputs){return(\nInputs.toggle\n)}\n\nfunction _Radio(Inputs){return(\nInputs.radio\n)}\n\nfunction _Checkbox(Inputs){return(\nInputs.checkbox\n)}\n\nfunction _Range(Inputs){return(\nInputs.range\n)}\n\nfunction _Select(Inputs){return(\nInputs.select\n)}\n\nfunction _Text(Inputs){return(\nInputs.text\n)}\n\nfunction _Textarea(Inputs){return(\nInputs.textarea\n)}\n\nfunction _Search(Inputs){return(\nInputs.search\n)}\n\nfunction _Table(Inputs){return(\nInputs.table\n)}\n\nfunction _Input(Inputs){return(\nInputs.input\n)}\n\nfunction _bind(Inputs){return(\nInputs.bind\n)}\n\nfunction _disposal(Inputs){return(\nInputs.disposal\n)}\n\nfunction _svg(htl){return(\nhtl.svg\n)}\n\nfunction _html(htl){return(\nhtl.html\n)}\n\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  function toString() { return this.url; }\n  const fileAttachments = new Map([\n    [\"us-state-capitals.tsv\", {url: new URL(\"./files/eee4d2a928a36026dab4281b76deb7fe0cd885f1c6df6e546efb79db7e5fa5ccc98a395f865d31c1db3344ff1734683764bb1a63871fb1b39f77bb810f49699c.tsv\", import.meta.url), mimeType: \"text/tab-separated-values\", toString}]\n  ]);\n  main.builtin(\"FileAttachment\", runtime.fileAttachments(name => fileAttachments.get(name)));\n  main.variable(observer()).define([\"md\"], _1);\n  main.variable(observer(\"usage\")).define(\"usage\", [\"md\"], _usage);\n  main.variable(observer(\"viewof gain\")).define(\"viewof gain\", [\"Inputs\"], _gain);\n  main.variable(observer(\"gain\")).define(\"gain\", [\"Generators\", \"viewof gain\"], (G, _) => G.input(_));\n  main.variable(observer(\"now\")).define(\"now\", [\"md\"], _now);\n  main.variable(observer(\"gain2\")).define(\"gain2\", [\"gain\"], _gain2);\n  main.variable(observer(\"currentgain\")).define(\"currentgain\", [\"gain\",\"md\"], _currentgain);\n  main.variable(observer()).define([\"md\"], _7);\n  main.variable(observer(\"basics\")).define(\"basics\", [\"md\"], _basics);\n  main.variable(observer(\"button\")).define(\"button\", [\"md\"], _button);\n  main.variable(observer(\"viewof clicks\")).define(\"viewof clicks\", [\"Inputs\"], _clicks);\n  main.variable(observer(\"clicks\")).define(\"clicks\", [\"Generators\", \"viewof clicks\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"clicks\"], _11);\n  main.variable(observer(\"toggle\")).define(\"toggle\", [\"md\"], _toggle);\n  main.variable(observer(\"viewof mute\")).define(\"viewof mute\", [\"Inputs\"], _mute);\n  main.variable(observer(\"mute\")).define(\"mute\", [\"Generators\", \"viewof mute\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"mute\"], _14);\n  main.variable(observer(\"checkbox\")).define(\"checkbox\", [\"md\"], _checkbox);\n  main.variable(observer(\"viewof flavors\")).define(\"viewof flavors\", [\"Inputs\"], _flavors);\n  main.variable(observer(\"flavors\")).define(\"flavors\", [\"Generators\", \"viewof flavors\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"flavors\"], _17);\n  main.variable(observer(\"radio\")).define(\"radio\", [\"md\"], _radio);\n  main.variable(observer(\"viewof flavor\")).define(\"viewof flavor\", [\"Inputs\"], _flavor);\n  main.variable(observer(\"flavor\")).define(\"flavor\", [\"Generators\", \"viewof flavor\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"flavor\"], _20);\n  main.variable(observer(\"range\")).define(\"range\", [\"md\"], _range);\n  main.variable(observer(\"viewof n\")).define(\"viewof n\", [\"Inputs\"], _n);\n  main.variable(observer(\"n\")).define(\"n\", [\"Generators\", \"viewof n\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"n\"], _23);\n  main.variable(observer(\"select\")).define(\"select\", [\"md\"], _select);\n  main.variable(observer(\"viewof homeState\")).define(\"viewof homeState\", [\"Inputs\",\"stateNames\"], _homeState);\n  main.variable(observer(\"homeState\")).define(\"homeState\", [\"Generators\", \"viewof homeState\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"homeState\"], _26);\n  main.variable(observer(\"viewof visitedStates\")).define(\"viewof visitedStates\", [\"Inputs\",\"stateNames\"], _visitedStates);\n  main.variable(observer(\"visitedStates\")).define(\"visitedStates\", [\"Generators\", \"viewof visitedStates\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"visitedStates\"], _28);\n  main.variable(observer()).define([\"md\"], _29);\n  main.variable(observer(\"viewof name\")).define(\"viewof name\", [\"Inputs\"], _name);\n  main.variable(observer(\"name\")).define(\"name\", [\"Generators\", \"viewof name\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"name\"], _31);\n  main.variable(observer()).define([\"md\"], _32);\n  main.variable(observer(\"viewof bio\")).define(\"viewof bio\", [\"Inputs\"], _bio);\n  main.variable(observer(\"bio\")).define(\"bio\", [\"Generators\", \"viewof bio\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"bio\"], _34);\n  main.variable(observer()).define([\"md\"], _35);\n  main.variable(observer(\"viewof birthday\")).define(\"viewof birthday\", [\"Inputs\"], _birthday);\n  main.variable(observer(\"birthday\")).define(\"birthday\", [\"Generators\", \"viewof birthday\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"birthday\"], _37);\n  main.variable(observer()).define([\"md\"], _38);\n  main.variable(observer(\"viewof color\")).define(\"viewof color\", [\"Inputs\"], _color);\n  main.variable(observer(\"color\")).define(\"color\", [\"Generators\", \"viewof color\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"color\"], _40);\n  main.variable(observer()).define([\"md\"], _41);\n  main.variable(observer(\"viewof file\")).define(\"viewof file\", [\"Inputs\"], _file);\n  main.variable(observer(\"file\")).define(\"file\", [\"Generators\", \"viewof file\"], (G, _) => G.input(_));\n  main.variable(observer(\"data\")).define(\"data\", [\"file\"], _data);\n  main.variable(observer(\"tables\")).define(\"tables\", [\"md\"], _tables);\n  main.variable(observer()).define([\"md\"], _45);\n  main.variable(observer(\"viewof search\")).define(\"viewof search\", [\"Inputs\",\"capitals\"], _search);\n  main.variable(observer(\"search\")).define(\"search\", [\"Generators\", \"viewof search\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"search\"], _47);\n  main.variable(observer()).define([\"md\"], _48);\n  main.variable(observer(\"viewof rows\")).define(\"viewof rows\", [\"Inputs\",\"search\"], _rows);\n  main.variable(observer(\"rows\")).define(\"rows\", [\"Generators\", \"viewof rows\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"rows\"], _50);\n  main.variable(observer(\"techniques\")).define(\"techniques\", [\"md\"], _techniques);\n  main.variable(observer()).define([\"md\"], _52);\n  main.variable(observer()).define([\"md\"], _53);\n  main.variable(observer()).define([\"Inputs\",\"html\"], _54);\n  main.variable(observer()).define([\"md\"], _55);\n  main.variable(observer()).define([\"md\"], _56);\n  main.variable(observer(\"capitals\")).define(\"capitals\", [\"FileAttachment\"], _capitals);\n  main.variable(observer(\"stateNames\")).define(\"stateNames\", [\"capitals\"], _stateNames);\n  main.variable(observer()).define([\"md\"], _59);\n  main.variable(observer(\"Button\")).define(\"Button\", [\"Inputs\"], _Button);\n  main.variable(observer(\"Toggle\")).define(\"Toggle\", [\"Inputs\"], _Toggle);\n  main.variable(observer(\"Radio\")).define(\"Radio\", [\"Inputs\"], _Radio);\n  main.variable(observer(\"Checkbox\")).define(\"Checkbox\", [\"Inputs\"], _Checkbox);\n  main.variable(observer(\"Range\")).define(\"Range\", [\"Inputs\"], _Range);\n  main.variable(observer(\"Select\")).define(\"Select\", [\"Inputs\"], _Select);\n  main.variable(observer(\"Text\")).define(\"Text\", [\"Inputs\"], _Text);\n  main.variable(observer(\"Textarea\")).define(\"Textarea\", [\"Inputs\"], _Textarea);\n  main.variable(observer(\"Search\")).define(\"Search\", [\"Inputs\"], _Search);\n  main.variable(observer(\"Table\")).define(\"Table\", [\"Inputs\"], _Table);\n  main.variable(observer(\"Input\")).define(\"Input\", [\"Inputs\"], _Input);\n  main.variable(observer(\"bind\")).define(\"bind\", [\"Inputs\"], _bind);\n  main.variable(observer(\"disposal\")).define(\"disposal\", [\"Inputs\"], _disposal);\n  main.variable(observer(\"svg\")).define(\"svg\", [\"htl\"], _svg);\n  main.variable(observer(\"html\")).define(\"html\", [\"htl\"], _html);\n  return main;\n}\n","import define1 from \"./a2e58f97fd5e8d7c@756.js\";\n\nfunction _1(md){return(\nmd`# Fault tolerant trie\n`\n)}\n\nfunction _test_addresses(Inputs,initial_list_of_addresses)\n{\n  const el = Inputs.textarea({\n    value: initial_list_of_addresses,\n    rows: 20,\n    resize: \"vertical\",\n    spellcheck: false\n  });\n  el.querySelector(\"textarea\").style.maxHeight = null;\n  let ta = el.querySelector(\"textarea\");\n  ta.style.setProperty(\"font-size\", \"0.8rem\", \"important\");\n  ta.style.setProperty(\"line-height\", \"1rem\", \"important\");\n\n  return el;\n}\n\n\nfunction _messy_address_to_lookup(Inputs)\n{\n  const el = Inputs.text({\n    label: \"Lookup an address\",\n    value: `CORNER SHOP 1 RAINBOW ROAD EXTRA ABBOTS LANGLEY HERTS UK`,\n    width: 800,\n    spellcheck: false\n  });\n  let ta = el.querySelector(\"input\");\n  ta.style.setProperty(\"font-size\", \"0.8rem\", \"important\");\n  ta.style.setProperty(\"line-height\", \"1rem\", \"important\");\n\n  return el;\n}\n\n\nfunction _trie_basic(show_trie_using_d3,addressTrie){return(\nshow_trie_using_d3(addressTrie)\n)}\n\nfunction _trie_with_route(show_highlighted_trie_using_d3,messy_address_to_lookup,addressTrie){return(\nshow_highlighted_trie_using_d3(\n  messy_address_to_lookup,\n  addressTrie\n)\n)}\n\nfunction _show_highlighted_trie_using_d3(d3,addressTrie,traceAddressRoute,renderTraceStepsTable,md)\n{\n  const SUCCESS_COLOR = \"#2ca02c\";\n  const FAILURE_COLOR = \"#d62728\";\n  const NEUTRAL_COLOR = \"#1f77b4\";\n\n  function trieToHierarchy(rootTrie) {\n    function nodeToObj(label, node) {\n      const children = node?.children\n        ? Array.from(node.children.entries(), ([tok, child]) => nodeToObj(tok, child))\n        : Array.isArray(node?.kids)\n        ? node.kids.map(([tok, child]) => nodeToObj(tok, child))\n        : [];\n      return {\n        name: label,\n        uprn: node?.uprn ?? null,\n        cnt: node?.cnt ?? 0,\n        term: node?.term ?? 0,\n        nodeRef: node ?? null,\n        children\n      };\n    }\n    if (!rootTrie) {\n      return {\n        name: \"root\",\n        uprn: null,\n        cnt: 0,\n        term: 0,\n        nodeRef: null,\n        children: []\n      };\n    }\n    return nodeToObj(\"root\", rootTrie);\n  }\n\n  function renderTrie(\n    trie,\n    {\n      nodeSize = 18,\n      paddingRight = 40,\n      bulletRadius = 3.5,\n      terminalColor = \"#1f77b4\",\n      highlightSet = new Set(),\n      highlightColor = FAILURE_COLOR,\n      highlightFillOpacity = 0.12\n    } = {}\n  ) {\n    const data = trieToHierarchy(trie);\n    const root = d3.hierarchy(data).eachBefore(((i = 0) => (d) => { d.index = i++; })());\n    const nodes = root.descendants();\n\n    const columns = [\n      { label: \"UPRN\", x: 380, format: (d) => d.data.uprn ?? \"-\" },\n      { label: \"count\", x: 460, format: (d) => d.data.cnt },\n      {\n        label: \"terminal\",\n        x: 560,\n        format: (d) => (d.data.term ? \"✓\" : \"\"),\n        fill: (d) => (d.data.term ? terminalColor : \"#444\")\n      }\n    ];\n\n    const width = Math.max(640, (columns.length ? d3.max(columns, (c) => c.x) : 0) + paddingRight);\n    const height = (nodes.length + 1) * nodeSize;\n\n    const svg = d3\n      .create(\"svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .attr(\"viewBox\", [-nodeSize / 2, (-nodeSize * 3) / 2, width, height])\n      .attr(\n        \"style\",\n        \"max-width: 100%; height: auto; font: 11px system-ui, sans-serif; overflow: visible;\"\n      );\n\n    const highlightNode = (node) => highlightSet.has(node?.data?.nodeRef);\n\n    const linkGroup = svg.append(\"g\").attr(\"fill\", \"none\").attr(\"stroke\", \"#b3b3b3\").attr(\"stroke-width\", 1.2);\n\n    linkGroup\n      .selectAll(\"path\")\n      .data(root.links())\n      .join(\"path\")\n      .attr(\n        \"d\",\n        (d) => `\n        M${d.source.depth * nodeSize},${d.source.index * nodeSize}\n        V${d.target.index * nodeSize}\n        h${nodeSize}\n      `\n      )\n      .attr(\"stroke\", (d) => {\n        const onPath = highlightSet.has(d.source.data.nodeRef) && highlightSet.has(d.target.data.nodeRef);\n        return onPath ? highlightColor : \"#b3b3b3\";\n      })\n      .attr(\"stroke-width\", (d) => {\n        const onPath = highlightSet.has(d.source.data.nodeRef) && highlightSet.has(d.target.data.nodeRef);\n        return onPath ? 2.4 : 1.2;\n      })\n      .attr(\"stroke-opacity\", (d) => {\n        const onPath = highlightSet.has(d.source.data.nodeRef) && highlightSet.has(d.target.data.nodeRef);\n        return onPath ? 0.95 : 0.5;\n      });\n\n    const gNode = svg\n      .append(\"g\")\n      .selectAll(\"g\")\n      .data(nodes)\n      .join(\"g\")\n      .attr(\"transform\", (d) => `translate(0,${d.index * nodeSize})`);\n\n    gNode\n      .insert(\"rect\", \"circle\")\n      .attr(\"x\", -nodeSize / 2)\n      .attr(\"y\", -nodeSize / 2)\n      .attr(\"width\", width)\n      .attr(\"height\", nodeSize)\n      .attr(\"fill\", (d) => (highlightNode(d) ? highlightColor : \"#000\"))\n      .attr(\"fill-opacity\", (d) => (highlightNode(d) ? highlightFillOpacity : 0));\n\n    gNode\n      .append(\"circle\")\n      .attr(\"cx\", (d) => d.depth * nodeSize)\n      .attr(\"r\", bulletRadius)\n      .attr(\"fill\", (d) => {\n        const onPath = highlightNode(d);\n        if (d.data.term) return onPath ? highlightColor : terminalColor;\n        if (onPath) return highlightColor;\n        return \"#999\";\n      })\n      .attr(\"stroke\", (d) => {\n        const onPath = highlightNode(d);\n        if (d.data.term) return onPath ? highlightColor : terminalColor;\n        return onPath ? highlightColor : null;\n      })\n      .attr(\"stroke-width\", (d) => {\n        const onPath = highlightNode(d);\n        if (d.data.term) return onPath ? 2 : 1.5;\n        return onPath ? 2 : null;\n      });\n\n    gNode\n      .append(\"text\")\n      .attr(\"dy\", \"0.32em\")\n      .attr(\"x\", (d) => d.depth * nodeSize + 6)\n      .attr(\"fill\", (d) => (highlightNode(d) ? highlightColor : \"#111\"))\n      .attr(\"font-weight\", (d) => (highlightNode(d) ? \"600\" : null))\n      .text((d) => d.data.name);\n\n    gNode.append(\"title\").text((d) => {\n      const path = d\n        .ancestors()\n        .reverse()\n        .map((a) => a.data.name)\n        .join(\" / \");\n      return (\n        `${path}\\n` +\n        `uprn=${d.data.uprn ?? 0}  count=${d.data.cnt}  terminal=${d.data.term ? \"yes\" : \"no\"}`\n      );\n    });\n\n    for (const { label, x, format, fill } of columns) {\n      svg\n        .append(\"text\")\n        .attr(\"dy\", \"0.32em\")\n        .attr(\"y\", -nodeSize)\n        .attr(\"x\", x)\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"font-weight\", \"bold\")\n        .text(label);\n\n      gNode\n        .append(\"text\")\n        .attr(\"dy\", \"0.32em\")\n        .attr(\"x\", x)\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"fill\", (d) => {\n          if (highlightNode(d)) return highlightColor;\n          return fill ? fill(d) : \"#444\";\n        })\n        .text((d) => format(d));\n    }\n\n    return svg.node();\n  }\n\n  return function showHighlightedTrieUsingD3(\n    messyAddress,\n    trie = addressTrie,\n    {\n      // New names (C++) with sensible defaults:\n      skipMinLocalCount = 10,\n      skipMaxInWalk = 2,\n      minMatchedTokens = 2,\n      entryMinLocalCount = 10,\n      maxTrieEntryDepth = 2,\n      // Legacy names for backward-compat:\n      skipCntThreshold,               // maps to skipMinLocalCount\n      maxMissingTailTokensInMessy,    // maps to maxTrieEntryDepth\n      traceOptions = {},\n      ...renderOptions\n    } = {}\n  ) {\n    const address = messyAddress ?? \"\";\n    const trimmed = address.trim();\n\n    // Unify options for the walker (new names take precedence; legacy still works).\n    const unifiedTraceOptions = {\n      skipMinLocalCount:\n        traceOptions.skipMinLocalCount ??\n        skipMinLocalCount ??\n        skipCntThreshold,\n      skipMaxInWalk: traceOptions.skipMaxInWalk ?? skipMaxInWalk,\n      minMatchedTokens: traceOptions.minMatchedTokens ?? minMatchedTokens,\n      entryMinLocalCount:\n        traceOptions.entryMinLocalCount ?? entryMinLocalCount,\n      maxTrieEntryDepth:\n        traceOptions.maxTrieEntryDepth ??\n        maxTrieEntryDepth ??\n        maxMissingTailTokensInMessy,\n      maxStartOffset: traceOptions.maxStartOffset // optional\n    };\n\n    const trace = traceAddressRoute(trimmed, trie, unifiedTraceOptions);\n\n    const matched = Boolean(trace?.outcome?.matched);\n    const computedHighlightColor = trimmed\n      ? matched\n        ? SUCCESS_COLOR\n        : FAILURE_COLOR\n      : NEUTRAL_COLOR;\n\n    const highlightNodes = new Set(trace?.route?.pathNodes ?? []);\n    if (trie) highlightNodes.add(trie);\n\n    const renderParams = {\n      highlightSet: highlightNodes,\n      ...renderOptions\n    };\n    if (renderParams.highlightColor == null) {\n      renderParams.highlightColor = computedHighlightColor;\n    }\n\n    const svg = renderTrie(trie, renderParams);\n\n    const container = document.createElement(\"div\");\n    container.style.display = \"flex\";\n    container.style.flexDirection = \"column\";\n    container.style.gap = \"0.5rem\";\n\n    const status = document.createElement(\"div\");\n    status.style.fontFamily = \"sans-serif\";\n    status.style.fontSize = \"12px\";\n    status.style.whiteSpace = \"pre-line\";\n\n    if (!trimmed) {\n      status.textContent = \"Enter an address to trace through the trie.\";\n      container.appendChild(status);\n    } else {\n      container.appendChild(status);\n\n      const addrBlock = document.createElement(\"div\");\n      addrBlock.style.display = \"flex\";\n      addrBlock.style.flexDirection = \"column\";\n      addrBlock.style.fontFamily = \"monospace\";\n      addrBlock.style.fontSize = \"12px\";\n      addrBlock.style.gap = \"0.2rem\";\n\n      const messyLine = document.createElement(\"div\");\n      messyLine.textContent = `Input : ${trimmed}`;\n      messyLine.style.color = \"#444\";\n\n      const canonicalLine = document.createElement(\"div\");\n      canonicalLine.textContent = matched\n        ? `Match : ${trace.summary?.matchedTokens?.join(\" \") ?? \"\"}`\n        : \"Match : (none)\";\n      canonicalLine.style.color = matched ? \"#2ca02c\" : \"#d62728\";\n\n      addrBlock.appendChild(messyLine);\n      addrBlock.appendChild(canonicalLine);\n      container.appendChild(addrBlock);\n    }\n\n    if (svg) {\n      container.appendChild(svg);\n    }\n\n    if (typeof renderTraceStepsTable === \"function\") {\n      const tableEl = renderTraceStepsTable(trace);\n      if (tableEl) {\n        container.appendChild(\n          md`The following explains how the algorithm walked through the trie from root to branch token by token:`\n        );\n        container.appendChild(tableEl);\n      }\n    }\n\n    container.trace = trace;\n    return container;\n  };\n}\n\n\nfunction _renderTraceStepsTable(){return(\n(trace, options = {}) => {\n  const {\n    showReason = true,\n    showDetails = true,\n    tableClass = \"trace-steps-table\"\n  } = options;\n\n  const container = document.createElement(\"div\");\n  container.className = \"trace-steps\";\n\n  const table = document.createElement(\"table\");\n  table.className = tableClass;\n  table.style.borderCollapse = \"collapse\";\n  table.style.fontFamily = \"system-ui, sans-serif\";\n  table.style.fontSize = \"12px\";\n  table.style.marginTop = \"0.5rem\";\n  table.style.width = \"100%\";\n\n  const makeCell = (tag, text, align = \"left\") => {\n    const cell = document.createElement(tag);\n    cell.textContent = text;\n    cell.style.border = \"1px solid #ddd\";\n    cell.style.padding = \"0.25rem 0.5rem\";\n    cell.style.textAlign = align;\n    return cell;\n  };\n\n  const header = document.createElement(\"tr\");\n  header.appendChild(makeCell(\"th\", \"idx\", \"right\"));\n  header.appendChild(makeCell(\"th\", \"token\"));\n  header.appendChild(makeCell(\"th\", \"action\"));\n  if (showReason) header.appendChild(makeCell(\"th\", \"reason\"));\n  if (showDetails) header.appendChild(makeCell(\"th\", \"details\"));\n  table.appendChild(header);\n\n  const steps = trace?.route?.steps ?? [];\n  const actionText = (step) => {\n    if (!step) return \"\";\n    switch (step.action) {\n      case \"consumed\":\n        return step.reason === \"consumed_after_skip\" ? \"✓ via skip\" : \"✓\";\n      case \"skipped\":\n        return \"skip\";\n      case \"mismatch\":\n        return \"✗ mismatch\";\n      default:\n        return \"·\";\n    }\n  };\n\n  if (steps.length === 0) {\n    const row = document.createElement(\"tr\");\n    row.appendChild(makeCell(\"td\", \"-\", \"right\"));\n    row.appendChild(makeCell(\"td\", \"(no steps)\"));\n    row.appendChild(makeCell(\"td\", \"\"));\n    if (showReason) row.appendChild(makeCell(\"td\", \"\"));\n    if (showDetails) row.appendChild(makeCell(\"td\", \"\"));\n    table.appendChild(row);\n  } else {\n    const ordered = steps.map((step, idx) => ({ step, idx })).reverse();\n    for (const { step, idx } of ordered) {\n      const row = document.createElement(\"tr\");\n      row.appendChild(makeCell(\"td\", String(idx), \"right\"));\n      row.appendChild(makeCell(\"td\", step.token ?? \"\", \"left\"));\n      row.appendChild(makeCell(\"td\", actionText(step), \"left\"));\n      if (showReason) {\n        const reasonText = step.reason ? step.reason.replace(/_/g, \" \") : \"\";\n        row.appendChild(makeCell(\"td\", reasonText, \"left\"));\n      }\n      if (showDetails) {\n        const details = [];\n        if (step.event?.type === \"skip\" && step.event.lookaheadToken) {\n          details.push(`lookahead→${step.event.lookaheadToken}`);\n        }\n        if (\n          step.event?.nodeAfter?.uprn != null &&\n          step.event.type === \"consume\"\n        ) {\n          details.push(`uprn=${step.event.nodeAfter.uprn}`);\n        }\n        if (\n          step.event?.nodeAfter?.cnt != null &&\n          step.event.type === \"consume\"\n        ) {\n          details.push(`cnt=${step.event.nodeAfter.cnt}`);\n        }\n        if (step.event?.type === \"mismatch\") {\n          details.push(\"no child\");\n        }\n        row.appendChild(makeCell(\"td\", details.join(\", \"), \"left\"));\n      }\n      table.appendChild(row);\n    }\n  }\n\n  container.appendChild(table);\n  return container;\n}\n)}\n\nfunction _traceAddressRoute(addressTrie)\n{\n  const MAX_TRAILING_TOKENS_TO_IGNORE = 2;\n  const tokenize = (text) =>\n    text ? text.trim().split(/\\s+/).filter(Boolean) : [];\n\n  const toOriginalIndex = (reversedIndex, total) => total - 1 - reversedIndex;\n\n  const sortUnique = (indices) =>\n    Array.from(new Set(indices)).sort((a, b) => a - b);\n\n  const collectEntryNodes = (root, maxDepth) => {\n    if (!root) return [];\n    const entries = [{ node: root, path: [root], depth: 0 }];\n    if (maxDepth <= 0) return entries;\n    const stack = [{ node: root, depth: 0, path: [root] }];\n    while (stack.length) {\n      const { node, depth, path } = stack.pop();\n      if (depth === maxDepth) continue;\n      for (const child of node.children.values()) {\n        const nextPath = [...path, child];\n        entries.push({ node: child, path: nextPath, depth: depth + 1 });\n        stack.push({ node: child, depth: depth + 1, path: nextPath });\n      }\n    }\n    return entries;\n  };\n\n  const buildSteps = (attempt, tokens, reversedTokens, total) => {\n    const steps = tokens.map((token, index) => ({\n      index,\n      token,\n      reversedIndex: total - 1 - index,\n      action: \"ignored\",\n      reason: \"not_processed\",\n      event: null,\n      nodeBefore: null,\n      nodeAfter: null\n    }));\n\n    const markStep = (originalIndex, updates) => {\n      if (originalIndex < 0 || originalIndex >= steps.length) return;\n      steps[originalIndex] = { ...steps[originalIndex], ...updates };\n    };\n\n    for (const evt of attempt.events) {\n      if (evt.originalIndex == null) continue;\n      if (evt.type === \"consume\") {\n        markStep(evt.originalIndex, {\n          action: \"consumed\",\n          reason:\n            evt.via === \"skip\" ? \"consumed_after_skip\" : \"consumed_direct\",\n          event: evt,\n          nodeBefore: evt.nodeBefore ?? null,\n          nodeAfter: evt.nodeAfter ?? null\n        });\n      } else if (evt.type === \"post_accept_skip\") {\n        markStep(evt.originalIndex, {\n          action: \"skipped\",\n          reason: \"match_already_found\",\n          event: evt,\n          nodeBefore: evt.node ?? evt.nodeBefore ?? null,\n          nodeAfter: evt.node ?? evt.nodeAfter ?? null\n        });\n      } else if (evt.type === \"skip\") {\n        markStep(evt.originalIndex, {\n          action: \"skipped\",\n          reason: evt.reason,\n          event: evt,\n          nodeBefore: evt.nodeBefore ?? null,\n          nodeAfter: evt.nodeAfter ?? null\n        });\n      } else if (evt.type === \"mismatch\") {\n        markStep(evt.originalIndex, {\n          action: \"mismatch\",\n          reason: evt.reason,\n          event: evt,\n          nodeBefore: evt.node ?? null,\n          nodeAfter: evt.node ?? null\n        });\n      }\n    }\n\n    for (let rev = 0; rev < attempt.startIndex; rev += 1) {\n      const originalIndex = toOriginalIndex(rev, total);\n      const step = steps[originalIndex];\n      if (step && step.action === \"ignored\") {\n        steps[originalIndex] = {\n          ...step,\n          reason: \"start_offset\"\n        };\n      }\n    }\n\n    const remainingReason = attempt.matched\n      ? \"ignored_after_accept\"\n      : \"ignored_after_failure\";\n    for (let rev = attempt.finalIndex; rev < total; rev += 1) {\n      const originalIndex = toOriginalIndex(rev, total);\n      const step = steps[originalIndex];\n      if (step && step.action === \"ignored\") {\n        steps[originalIndex] = {\n          ...step,\n          reason: remainingReason\n        };\n      }\n    }\n\n    return steps;\n  };\n\n  const buildResult = (attempt, context) => {\n    const {\n      messyAddress,\n      tokens,\n      reversedTokens,\n      parameters,\n      total,\n      attemptsTried\n    } = context;\n    const steps = buildSteps(attempt, tokens, reversedTokens, total);\n    return {\n      messyAddress,\n      tokens,\n      reversedTokens,\n      parameters,\n      outcome: {\n        matched: attempt.matched,\n        type: attempt.decision?.type ?? null,\n        reason: attempt.decision?.reason ?? null,\n        uprn: attempt.decision?.uprn ?? null,\n        node: attempt.decision?.node ?? attempt.finalNode ?? null,\n        remainingTokens: attempt.decision?.remainingTokens ?? null,\n        isLeaf: attempt.decision?.isLeaf ?? null\n      },\n      route: {\n        attemptsConsidered: attemptsTried,\n        startIndex: attempt.startIndex,\n        entryDepth: attempt.entryDepth,\n        entryPath: attempt.entryPath,\n        pathNodes: attempt.pathNodes,\n        finalIndex: attempt.finalIndex,\n        events: attempt.events,\n        steps\n      },\n      summary: {\n        consumedCount: attempt.consumedIndices.length,\n        skippedCount: attempt.skippedIndices.length,\n        matchedTokens: attempt.matchedTokens,\n        skippedTokens: attempt.skippedTokens\n      }\n    };\n  };\n\n  return function traceAddressRoute(\n    messyAddress,\n    root = addressTrie,\n    {\n      skipCntThreshold = 6,\n      maxMissingTailTokensInMessy = 0,\n      maxStartOffset = 2\n    } = {}\n  ) {\n    if (!root) {\n      return {\n        messyAddress,\n        tokens: [],\n        reversedTokens: [],\n        parameters: {\n          skipCntThreshold,\n          maxMissingTailTokensInMessy,\n          maxStartOffset\n        },\n        outcome: {\n          matched: false,\n          type: \"reject\",\n          reason: \"missing_trie\",\n          uprn: null,\n          node: null,\n          remainingTokens: null,\n          isLeaf: null\n        },\n        route: {\n          attemptsConsidered: 0,\n          startIndex: 0,\n          entryDepth: 0,\n          entryPath: [],\n          pathNodes: [],\n          finalIndex: 0,\n          events: [],\n          steps: []\n        },\n        summary: {\n          consumedCount: 0,\n          skippedCount: 0,\n          matchedTokens: [],\n          skippedTokens: []\n        }\n      };\n    }\n\n    const tokens = tokenize(messyAddress || \"\");\n    const reversedTokens = [...tokens].reverse();\n    const total = reversedTokens.length;\n    const parameters = {\n      skipCntThreshold,\n      maxMissingTailTokensInMessy,\n      maxStartOffset\n    };\n\n    if (total === 0) {\n      return {\n        messyAddress,\n        tokens,\n        reversedTokens,\n        parameters,\n        outcome: {\n          matched: false,\n          type: \"reject\",\n          reason: \"empty_input\",\n          uprn: null,\n          node: root,\n          remainingTokens: 0,\n          isLeaf: root.children.size === 0 && root.term === 1\n        },\n        route: {\n          attemptsConsidered: 0,\n          startIndex: 0,\n          entryDepth: 0,\n          entryPath: [root],\n          pathNodes: [root],\n          finalIndex: 0,\n          events: [],\n          steps: []\n        },\n        summary: {\n          consumedCount: 0,\n          skippedCount: 0,\n          matchedTokens: [],\n          skippedTokens: []\n        }\n      };\n    }\n\n    const entries = collectEntryNodes(root, maxMissingTailTokensInMessy);\n    let attemptCounter = 0;\n    let bestAttempt = null;\n\n    const considerBest = (candidate) => {\n      if (!candidate) return;\n      if (!bestAttempt) {\n        bestAttempt = candidate;\n        return;\n      }\n      const currentMatched = bestAttempt.consumedIndices.length;\n      const candidateMatched = candidate.consumedIndices.length;\n      if (candidateMatched > currentMatched) {\n        bestAttempt = candidate;\n        return;\n      }\n      if (\n        candidateMatched === currentMatched &&\n        candidate.pathNodes.length > bestAttempt.pathNodes.length\n      ) {\n        bestAttempt = candidate;\n      }\n    };\n\n    const contextBase = {\n      messyAddress,\n      tokens,\n      reversedTokens,\n      parameters,\n      total\n    };\n\n    const maxStart = Math.min(total - 1, Math.max(0, maxStartOffset));\n\n    for (let start = 0; start <= maxStart; start += 1) {\n      for (let entryIndex = 0; entryIndex < entries.length; entryIndex += 1) {\n        const entry = entries[entryIndex];\n        attemptCounter += 1;\n\n        const pathNodes = entry.path.slice();\n        let node = entry.node;\n        let index = start;\n        let skipsUsed = 0;\n\n        const attempt = {\n          attemptId: attemptCounter,\n          startIndex: start,\n          entryIndex,\n          entryDepth: entry.depth,\n          entryNode: entry.node,\n          entryPath: entry.path.slice(),\n          pathNodes,\n          events: [],\n          consumedIndices: [],\n          skippedIndices: [],\n          matchedTokens: [],\n          skippedTokens: [],\n          finalNode: entry.node,\n          finalIndex: start,\n          matched: false,\n          decision: null,\n          failure: null\n        };\n\n        const recordEvent = (type, data = {}) => {\n          attempt.events.push({\n            type,\n            ...data,\n            step: attempt.events.length\n          });\n        };\n\n        recordEvent(\"seed\", {\n          node,\n          entryDepth: entry.depth,\n          startIndex: start,\n          entryIndex\n        });\n\n        while (index < total) {\n          const reversedIndex = index;\n          const originalIndex = toOriginalIndex(reversedIndex, total);\n          const token = reversedTokens[reversedIndex];\n          const child = node.children.get(token);\n\n          if (child) {\n            const prevNode = node;\n            node = child;\n            pathNodes.push(node);\n            recordEvent(\"consume\", {\n              token,\n              originalIndex,\n              reversedIndex,\n              nodeBefore: prevNode,\n              nodeAfter: node,\n              via: \"direct\"\n            });\n            attempt.consumedIndices.push(originalIndex);\n            index += 1;\n            continue;\n          }\n\n          const nodeHasChildren = node.children.size > 0;\n          const canConsiderSkip =\n            skipsUsed === 0 &&\n            index + 1 < total &&\n            !(node.term && nodeHasChildren);\n\n          if (canConsiderSkip) {\n            const lookaheadIndex = index + 1;\n            const lookaheadToken = reversedTokens[lookaheadIndex];\n            const skipTarget = node.children.get(lookaheadToken);\n            if (skipTarget && skipTarget.cnt >= skipCntThreshold) {\n              const prevNode = node;\n              const skippedOriginalIndex = originalIndex;\n              const consumedOriginalIndex = toOriginalIndex(\n                lookaheadIndex,\n                total\n              );\n\n              recordEvent(\"skip\", {\n                token,\n                originalIndex: skippedOriginalIndex,\n                reversedIndex,\n                lookaheadToken,\n                nodeBefore: prevNode,\n                nodeAfter: skipTarget,\n                reason: \"cnt_gate\"\n              });\n\n              node = skipTarget;\n              pathNodes.push(node);\n              recordEvent(\"consume\", {\n                token: lookaheadToken,\n                originalIndex: consumedOriginalIndex,\n                reversedIndex: lookaheadIndex,\n                nodeBefore: prevNode,\n                nodeAfter: node,\n                via: \"skip\"\n              });\n\n              attempt.skippedIndices.push(skippedOriginalIndex);\n              attempt.consumedIndices.push(consumedOriginalIndex);\n              skipsUsed = 1;\n              index += 2;\n              continue;\n            }\n          }\n\n          recordEvent(\"mismatch\", {\n            token,\n            originalIndex,\n            reversedIndex,\n            node,\n            reason: \"no_child\"\n          });\n          attempt.failure = {\n            type: \"mismatch\",\n            token,\n            originalIndex,\n            reversedIndex\n          };\n          break;\n        }\n\n        attempt.finalNode = node;\n        attempt.finalIndex = index;\n        attempt.pathNodes = pathNodes;\n\n        const consumedSorted = sortUnique(attempt.consumedIndices);\n        const skippedSorted = sortUnique(attempt.skippedIndices);\n        attempt.matchedTokens = consumedSorted.map((idx) => tokens[idx]);\n        attempt.skippedTokens = skippedSorted.map((idx) => tokens[idx]);\n\n        const remainingTokens = total - index;\n        const highestConsumedIndex =\n          consumedSorted.length > 0\n            ? consumedSorted[consumedSorted.length - 1]\n            : -1;\n        const tailIgnoredCount =\n          highestConsumedIndex < 0\n            ? total\n            : Math.max(0, total - (highestConsumedIndex + 1));\n\n        if (node.term) {\n          const isLeaf = node.children.size === 0;\n          const consumedAllTokens = index === total;\n          const trailingWithinLimit =\n            tailIgnoredCount <= MAX_TRAILING_TOKENS_TO_IGNORE;\n          const canAccept =\n            trailingWithinLimit && (isLeaf || consumedAllTokens);\n          if (canAccept) {\n            if (attempt.failure?.type === \"mismatch\") {\n              const { originalIndex, reversedIndex } = attempt.failure;\n              const eventIndex = attempt.events.findIndex(\n                (evt) =>\n                  evt.type === \"mismatch\" &&\n                  evt.originalIndex === originalIndex &&\n                  evt.reversedIndex === reversedIndex\n              );\n              if (eventIndex >= 0) {\n                const mismatchEvt = attempt.events[eventIndex];\n                attempt.events[eventIndex] = {\n                  ...mismatchEvt,\n                  type: \"post_accept_skip\",\n                  reason: \"match_already_found\"\n                };\n              }\n              attempt.failure = null;\n            }\n\n            const reason = !isLeaf\n              ? \"terminal_non_leaf_consumed_all_tokens\"\n              : remainingTokens > 0\n              ? \"terminal_leaf_accept_with_remaining\"\n              : tailIgnoredCount > 0\n              ? \"terminal_leaf_accept_with_trailing_tokens\"\n              : \"terminal_leaf_accept\";\n\n            attempt.matched = true;\n            attempt.decision = {\n              type: \"accept\",\n              reason,\n              uprn: node.uprn ?? null,\n              node,\n              remainingTokens,\n              isLeaf,\n              consumedCount: consumedSorted.length,\n              skippedCount: skippedSorted.length\n            };\n\n            recordEvent(\"accept\", {\n              reason,\n              node,\n              remainingTokens,\n              uprn: node.uprn ?? null\n            });\n\n            return buildResult(attempt, {\n              ...contextBase,\n              attemptsTried: attemptCounter\n            });\n          } else if (!trailingWithinLimit) {\n            attempt.failure = {\n              type: \"too_many_trailing_tokens\",\n              tailIgnoredCount,\n              limit: MAX_TRAILING_TOKENS_TO_IGNORE\n            };\n          }\n        }\n\n        const failureReason = (() => {\n          if (attempt.failure?.type === \"too_many_trailing_tokens\") {\n            return \"terminal_exceeded_trailing_token_limit\";\n          }\n          if (attempt.failure?.type === \"mismatch\") {\n            return \"mismatch_no_child\";\n          }\n          if (index >= total && !node.term) {\n            return \"non_terminal_after_consuming_all\";\n          }\n          if (node.term && node.children.size > 0 && index < total) {\n            return \"terminal_non_leaf_unconsumed_tokens\";\n          }\n          return \"no_accept_condition\";\n        })();\n\n        attempt.decision = {\n          type: \"reject\",\n          reason: failureReason,\n          uprn: null,\n          node,\n          remainingTokens,\n          isLeaf: node.children.size === 0,\n          consumedCount: consumedSorted.length,\n          skippedCount: skippedSorted.length\n        };\n\n        recordEvent(\"reject\", {\n          reason: failureReason,\n          node,\n          remainingTokens\n        });\n\n        considerBest(attempt);\n      }\n    }\n\n    const attemptsTried = attemptCounter;\n    if (!bestAttempt) {\n      bestAttempt = {\n        startIndex: 0,\n        entryDepth: 0,\n        entryPath: [root],\n        pathNodes: [root],\n        finalIndex: 0,\n        events: [],\n        consumedIndices: [],\n        skippedIndices: [],\n        matchedTokens: [],\n        skippedTokens: [],\n        matched: false,\n        decision: {\n          type: \"reject\",\n          reason: \"no_attempts\",\n          uprn: null,\n          node: root,\n          remainingTokens: total,\n          isLeaf: root.children.size === 0\n        }\n      };\n    }\n\n    return buildResult(bestAttempt, {\n      ...contextBase,\n      attemptsTried\n    });\n  };\n}\n\n\nfunction _addressTrie(test_addresses,buildReverseTrie)\n{\n  const lines = test_addresses\n    .split(/\\r?\\n/)\n    .map((line) => line.trim())\n    .filter(Boolean);\n\n  const rows = lines.map((line, index) => [index + 1, line]);\n\n  return buildReverseTrie(rows);\n}\n\n\nfunction _buildReverseTrie()\n{\n  class TrieNode {\n    constructor() {\n      this.children = new Map(); // preserve insertion order for deterministic traversals\n      this.uprn = null;\n      this.term = 0;\n      this.cnt = 0;\n    }\n\n    child(token) {\n      if (!this.children.has(token)) {\n        this.children.set(token, new TrieNode());\n      }\n      return this.children.get(token);\n    }\n  }\n\n  const dfsCnt = (node) => {\n    let total = node.term ? 1 : 0;\n    for (const child of node.children.values()) {\n      total += dfsCnt(child);\n    }\n    node.cnt = total;\n    return total;\n  };\n\n  const build = (rows) => {\n    const root = new TrieNode();\n\n    for (const [uprn, text] of rows) {\n      const tokens = text.split(\" \").reverse();\n      let node = root;\n\n      for (const token of tokens) {\n        node = node.child(token);\n      }\n\n      node.term = 1;\n      node.uprn = uprn;\n    }\n\n    dfsCnt(root);\n    return root;\n  };\n\n  build.Node = TrieNode;\n  build.dfsCnt = dfsCnt;\n\n  return build;\n}\n\n\nfunction _show_trie_using_d3(d3)\n{\n  // Convert your Map-based trie into a D3-friendly object\n  function trieToHierarchy(rootTrie) {\n    function nodeToObj(label, node) {\n      return {\n        name: label,\n        uprn: node?.uprn ?? null,\n        cnt: node?.cnt ?? 0,\n        term: node?.term ?? 0,\n        children: node?.children\n          ? Array.from(node.children.entries(), ([tok, child]) =>\n              nodeToObj(tok, child)\n            )\n          : []\n      };\n    }\n    if (!rootTrie)\n      return { name: \"root\", uprn: null, cnt: 0, term: 0, children: [] };\n    return nodeToObj(\"root\", rootTrie);\n  }\n\n  // Renderer\n  function render(\n    trie,\n    {\n      nodeSize = 18,\n      paddingRight = 40,\n      terminalColor = \"#1f77b4\", // bright blue\n      bulletRadius = 3.5 // slightly bigger than before\n    } = {}\n  ) {\n    const data = trieToHierarchy(trie);\n\n    const root = d3.hierarchy(data).eachBefore(\n      (\n        (i = 0) =>\n        (d) =>\n          (d.index = i++)\n      )()\n    );\n    const nodes = root.descendants();\n\n    // Right-side columns (with per-column fill styling)\n    const columns = [\n      { label: \"UPRN\", x: 380, format: (d) => d.data.uprn ?? \"-\" },\n      { label: \"count\", x: 460, format: (d) => d.data.cnt },\n      {\n        label: \"terminal\",\n        x: 560,\n        format: (d) => (d.data.term ? \"✓\" : \"\"),\n        fill: (d) => (d.data.term ? terminalColor : \"#444\")\n      }\n    ];\n\n    const width = Math.max(\n      640,\n      (columns.length ? d3.max(columns, (c) => c.x) : 0) + paddingRight\n    );\n    const height = (nodes.length + 1) * nodeSize;\n\n    const svg = d3\n      .create(\"svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .attr(\"viewBox\", [-nodeSize / 2, (-nodeSize * 3) / 2, width, height])\n      .attr(\n        \"style\",\n        \"max-width: 100%; height: auto; font: 11px system-ui, sans-serif; overflow: visible;\"\n      );\n\n    // Links\n    svg\n      .append(\"g\")\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"#b3b3b3\")\n      .selectAll()\n      .data(root.links())\n      .join(\"path\")\n      .attr(\n        \"d\",\n        (d) => `\n        M${d.source.depth * nodeSize},${d.source.index * nodeSize}\n        V${d.target.index * nodeSize}\n        h${nodeSize}\n      `\n      );\n\n    // Nodes (one row per node)\n    const gNode = svg\n      .append(\"g\")\n      .selectAll()\n      .data(nodes)\n      .join(\"g\")\n      .attr(\"transform\", (d) => `translate(0,${d.index * nodeSize})`);\n\n    // Bullet: terminal => green outline, no fill; otherwise grey filled\n    gNode\n      .append(\"circle\")\n      .attr(\"cx\", (d) => d.depth * nodeSize)\n      .attr(\"r\", bulletRadius)\n      .attr(\"fill\", (d) => (d.data.term ? terminalColor : \"#999\"))\n      .attr(\"stroke\", (d) => (d.data.term ? terminalColor : null))\n      .attr(\"stroke-width\", (d) => (d.data.term ? 1.5 : null));\n\n    // Label (token)\n    gNode\n      .append(\"text\")\n      .attr(\"dy\", \"0.32em\")\n      .attr(\"x\", (d) => d.depth * nodeSize + 6)\n      .attr(\"fill\", \"#111\")\n      .text((d) => d.data.name);\n\n    // Tooltip\n    gNode.append(\"title\").text(\n      (d) =>\n        `${d\n          .ancestors()\n          .reverse()\n          .map((a) => a.data.name)\n          .join(\" / \")}\\n` +\n        `uprn=${d.data.uprn ?? 0}  count=${d.data.cnt}  terminal=${\n          d.data.term ? \"yes\" : \"no\"\n        }`\n    );\n\n    // Column headers + values\n    for (const { label, x, format, fill } of columns) {\n      svg\n        .append(\"text\")\n        .attr(\"dy\", \"0.32em\")\n        .attr(\"y\", -nodeSize)\n        .attr(\"x\", x)\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"font-weight\", \"bold\")\n        .text(label);\n\n      gNode\n        .append(\"text\")\n        .attr(\"dy\", \"0.32em\")\n        .attr(\"x\", x)\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"fill\", (d) => (fill ? fill(d) : \"#444\"))\n        .text((d) => format(d));\n    }\n\n    return svg.node();\n  }\n\n  return render;\n}\n\n\nfunction _example_trie_for_blog(show_trie_using_d3,trie_for_blog){return(\nshow_trie_using_d3(trie_for_blog)\n)}\n\nfunction _trie_for_blog(hard_coded_addresses,buildReverseTrie)\n{\n  const lines = hard_coded_addresses\n    .split(/\\r?\\n/)\n    .map((line) => line.trim())\n    .filter(Boolean);\n\n  const rows = lines.map((line, index) => [index + 1, line]);\n\n  return buildReverseTrie(rows);\n}\n\n\nfunction _hard_coded_addresses(){return(\n`1 HIGH STREET WESTMINSTER\n2 HIGH STREET WESTMINSTER\n3 HIGH STREET WESTMINSTER\nFLAT A 3 HIGH STREET WESTMINSTER\nFLAT B 3 HIGH STREET WESTMINSTER\n4 HIGH STREET WESTMINSTER\n5 HIGH STREET WESTMINSTER\nANNEX 5 HIGH STREET WESTMINSTER`\n)}\n\nfunction _initial_list_of_addresses(){return(\n`1 RAINBOW ROAD ABBOTS LANGLEY\n2 RAINBOW ROAD ABBOTS LANGLEY\n3 RAINBOW ROAD ABBOTS LANGLEY\nFLAT A 3 RAINBOW ROAD ABBOTS LANGLEY\nFLAT B 3 RAINBOW ROAD ABBOTS LANGLEY\n4 RAINBOW ROAD ABBOTS LANGLEY\n5 RAINBOW ROAD ABBOTS LANGLEY\nANNEX 5 RAINBOW ROAD ABBOTS LANGLEY\n8 RAINBOW ROAD ABBOTS LANGLEY\nMY LONG BUSINESS NAME 9 RAINBOW ROAD ABBOTS LANGLEY`\n)}\n\nfunction _initial_list_of_addresses_md(md,initial_list_of_addresses)\n{\n  return md`\n\\`\\`\\`txt\n${initial_list_of_addresses}\n\\`\\`\\`\n\n`;\n}\n\n\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  main.variable(observer()).define([\"md\"], _1);\n  main.variable(observer(\"viewof test_addresses\")).define(\"viewof test_addresses\", [\"Inputs\",\"initial_list_of_addresses\"], _test_addresses);\n  main.variable(observer(\"test_addresses\")).define(\"test_addresses\", [\"Generators\", \"viewof test_addresses\"], (G, _) => G.input(_));\n  main.variable(observer(\"viewof messy_address_to_lookup\")).define(\"viewof messy_address_to_lookup\", [\"Inputs\"], _messy_address_to_lookup);\n  main.variable(observer(\"messy_address_to_lookup\")).define(\"messy_address_to_lookup\", [\"Generators\", \"viewof messy_address_to_lookup\"], (G, _) => G.input(_));\n  main.variable(observer(\"trie_basic\")).define(\"trie_basic\", [\"show_trie_using_d3\",\"addressTrie\"], _trie_basic);\n  main.variable(observer(\"trie_with_route\")).define(\"trie_with_route\", [\"show_highlighted_trie_using_d3\",\"messy_address_to_lookup\",\"addressTrie\"], _trie_with_route);\n  main.variable(observer(\"show_highlighted_trie_using_d3\")).define(\"show_highlighted_trie_using_d3\", [\"d3\",\"addressTrie\",\"traceAddressRoute\",\"renderTraceStepsTable\",\"md\"], _show_highlighted_trie_using_d3);\n  main.variable(observer(\"renderTraceStepsTable\")).define(\"renderTraceStepsTable\", _renderTraceStepsTable);\n  main.variable(observer(\"traceAddressRoute\")).define(\"traceAddressRoute\", [\"addressTrie\"], _traceAddressRoute);\n  main.variable(observer(\"addressTrie\")).define(\"addressTrie\", [\"test_addresses\",\"buildReverseTrie\"], _addressTrie);\n  main.variable(observer(\"buildReverseTrie\")).define(\"buildReverseTrie\", _buildReverseTrie);\n  const child1 = runtime.module(define1);\n  main.import(\"Textarea\", child1);\n  main.variable(observer(\"show_trie_using_d3\")).define(\"show_trie_using_d3\", [\"d3\"], _show_trie_using_d3);\n  main.variable(observer(\"example_trie_for_blog\")).define(\"example_trie_for_blog\", [\"show_trie_using_d3\",\"trie_for_blog\"], _example_trie_for_blog);\n  main.variable(observer(\"trie_for_blog\")).define(\"trie_for_blog\", [\"hard_coded_addresses\",\"buildReverseTrie\"], _trie_for_blog);\n  main.variable(observer(\"hard_coded_addresses\")).define(\"hard_coded_addresses\", _hard_coded_addresses);\n  main.variable(observer(\"initial_list_of_addresses\")).define(\"initial_list_of_addresses\", _initial_list_of_addresses);\n  main.variable(observer(\"initial_list_of_addresses_md\")).define(\"initial_list_of_addresses_md\", [\"md\",\"initial_list_of_addresses\"], _initial_list_of_addresses_md);\n  return main;\n}\n","/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nimport {MDXLayout} from \"../components/MDXLayout\";\nimport {SEO} from \"../components/SEO\";\nimport Subtitle from \"../components/Subtitle.jsx\";\nimport {Link} from \"gatsby\";\nimport AddressComparison from \"./address_matching/AddressComparison.jsx\";\nimport AddressCandidatesComparison from \"./address_matching/AddressCandidateComparison.jsx\";\nexport const Head = props => React.createElement(SEO, {\n  frontmatter: props.pageContext.frontmatter\n});\nimport {ObservableCell, WithObservableProvider} from '../components/ObservableCells';\nimport notebook from '@robinl/fault-tolerant-trie';\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    p: \"p\",\n    code: \"code\",\n    pre: \"pre\",\n    ul: \"ul\",\n    li: \"li\",\n    h2: \"h2\",\n    strong: \"strong\",\n    a: \"a\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.h1, null, \"Address matching using a fault tolerant trie\"), \"\\n\", React.createElement(_components.p, null, \"A data structure known as a \", React.createElement(_components.code, null, \"trie\"), \" offers a powerful tool for address matching.  It exploits the hierarchical nature of addresses, whereby tokens (words) in the address are typically represented in a specific to general order geographically.\"), \"\\n\", React.createElement(_components.p, null, \"For example, consider the following addresses:\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-txt\"\n  }, \"1 HIGH STREET WESTMINSTER\\n2 HIGH STREET WESTMINSTER\\n3 HIGH STREET WESTMINSTER\\nFLAT A 3 HIGH STREET WESTMINSTER\\nFLAT B 3 HIGH STREET WESTMINSTER\\n4 HIGH STREET WESTMINSTER\\n5 HIGH STREET WESTMINSTER\\nANNEX 5 HIGH STREET WESTMINSTER\\n\")), \"\\n\", React.createElement(_components.p, null, \"These can be represented as a trie as follows, where the blue nodes represent terminal nodes (the end of an address):\"), \"\\n\", React.createElement(WithObservableProvider, {\n    notebook: notebook\n  }, React.createElement(ObservableCell, {\n    cellName: \"example_trie_for_blog\"\n  }), React.createElement(_components.p, null, \"Observe how the trie structure encodes a lot of useful information about the tokens in the addresses. For example:\"), React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Does the token represent a 'terminal node' i.e. the end of an address\"), \"\\n\", React.createElement(_components.li, null, \"How many addresses can be reached from the node (the \", React.createElement(_components.code, null, \"count\"), \" property)\"), \"\\n\", React.createElement(_components.li, null, \"Whether the token represents a leaf (does \", React.createElement(_components.code, null, \"count=1\"), \").  Note that some terminal nodes are not leaves (the \", React.createElement(_components.code, null, \"ANNEX\"), \" example)\"), \"\\n\"), React.createElement(_components.h2, null, \"How to use a trie for address matching\"), React.createElement(_components.p, null, \"By walking the trie from root to branch we can attempt to match an input address to the addresses in the trie.\"), React.createElement(_components.p, null, \"On the face of it, this is little different from exact matching.  However, we can make this process much more powerful by introducing \", React.createElement(_components.strong, null, \"fault tolerance\"), \" into the trie.\"), React.createElement(_components.p, null, \"Consider for example these two addresses:\"), React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-txt\"\n  }, \"Messy address:  CORNER SHOP 8 RAINBOW ROAD EXTRA ABBOTS LANGLEY HERTS UK\\nClean address:  1 RAINBOW ROAD EXTRA ABBOTS LANGLEY\\n\")), React.createElement(_components.p, null, \"We could define the following rules for fault tolerance:\"), React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"You may ignore token(s) at the end of the messy address if by doing so, you can 'join' the trie of clean addresses at a node with a count above some threshold\"), \"\\n\", React.createElement(_components.li, null, \"You may skip a token in the middle of the messy address if this token does not exist in the trie at the current node, and by skipping it you can 'rejoin' the trie.\"), \"\\n\", React.createElement(_components.li, null, \"You may skip superfluous tokens at the start of the messy address if you've already hit a terminal node, and that terminal node does not have children.\"), \"\\n\"), React.createElement(_components.h2, null, \"Interactive playground\"), React.createElement(_components.p, null, \"Let's see how this works in practice. In the following I use a simple set of fault tolerant rules for illustrative purposes.\"), React.createElement(_components.p, null, \"Consider the following canonical addresses (note: this is ✨interactive✨ and you can edit the addresses):\"), React.createElement(ObservableCell, {\n    cellName: \"viewof test_addresses\"\n  }), React.createElement(_components.p, null, \"We can look up a messy address in the trie as follows.  Again, this is ✨interactive✨.\"), React.createElement(ObservableCell, {\n    cellName: \"viewof messy_address_to_lookup\"\n  }), React.createElement(ObservableCell, {\n    cellName: \"trie_with_route\"\n  })), \"\\n\", React.createElement(_components.h2, null, \"Implementing as a DuckDB Community extension\"), \"\\n\", React.createElement(_components.p, null, \"I have written a DuckDB Community Extension called \", React.createElement(_components.a, {\n    href: \"https://duckdb.org/community_extensions/extensions/splink_udfs.html\"\n  }, \"splink_udfs\"), \" that implements this function.\"), \"\\n\", React.createElement(_components.p, null, \"You can try it with in \", React.createElement(_components.a, {\n    href: \"https://shell.duckdb.org/\"\n  }, \"shell.duckdb.org\"), \" using the script you can unfold below:\"), \"\\n\", React.createElement(\"details\", null, React.createElement(\"summary\", null, \"Click to expand\"), React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-sql\"\n  }, \"-- Load the extension in shell.duckdb.org\\nINSTALL splink_udfs FROM community;\\nLOAD splink_udfs;\\n\\n-- Test data\\nCREATE OR REPLACE TEMP TABLE os_addresses(\\n  uprn BIGINT,\\n  addr VARCHAR,\\n  postcode_group INTEGER\\n);\\n\\nINSERT INTO os_addresses VALUES\\n (1,'1 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (2,'2 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (3,'3 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (4,'4 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (5,'5 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (6,'6 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (7,'7 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (8,'ANNEX 7 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (9,'9 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (10,'10 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (11,'11 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (12,'12 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (13,'13 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (14,'14 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (15,'15 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (16,'16 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (17,'17 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (18,'18 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (19,'19 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (20,'20 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (21,'21 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (22,'22 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (23,'MY LONG BUSINESS NAME 45 RAINBOW ROAD ABBOTS LANGLEY',2),\\n (34,'SOME OTHER ADDRESS 1 HIGH STREET',1);\\n\\n-- Build tries per postcode_group\\nCREATE OR REPLACE TEMP TABLE trie AS\\nWITH toks AS (\\n  SELECT\\n    postcode_group,\\n    uprn,\\n    string_split(regexp_replace(addr, '\\\\\\\\s+', ' '), ' ') AS t\\n  FROM os_addresses\\n)\\nSELECT\\n  postcode_group,\\n  build_suffix_trie(uprn, t) AS trie\\nFROM toks\\nGROUP BY postcode_group;\\n\\n-- Example lookup joined on postcode_group\\nWITH messy_addresses AS (\\n  SELECT\\n    2 AS postcode_group,\\n    string_split(regexp_replace('MY BUSINESS 22 RAINBOW ROAD ABBOTS LANGLEY', '\\\\\\\\s+', ' '), ' ') AS tokens\\n)\\nSELECT\\n  find_address(string_split('MY BUSINESS 22 RAINBOW ROAD ABBOTS LANGLEY HERTS', ' '), r.trie) AS uprn,\\nFROM messy_addresses m\\nJOIN trie r USING (postcode_group);\\n\"))), \"\\n\", React.createElement(_components.p, null, \"We are currently working on adding this approach as part of \", React.createElement(_components.a, {\n    href: \"https://github.com/moj-analytical-services/uk_address_matcher\"\n  }, \"uk_address_matcher\"), \" a package for fast, accurate address matching.\"));\n}\nfunction MDXContent(props = {}) {\n  return React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props));\n}\nexport default MDXContent;\n","import React, {\n    useRef,\n    useEffect,\n    createContext,\n    useContext,\n    useState,\n} from 'react';\nimport { Runtime, Inspector, Library } from '@observablehq/runtime';\n\nconst ObservableRuntimeContext = createContext(null);\n\nconst mountId = 'mdx-container-div';\n\nconst stdlib = new Library();\n\nconst library = Object.assign({}, stdlib, { width: width_cells });\n\nfunction width_cells() {\n    return stdlib.Generators.observe(notify => {\n        let width1 = notify(document.getElementById(mountId).clientWidth);\n        function resized() {\n            let width2 = document.getElementById(mountId).clientWidth;\n            if (width2 !== width1) notify((width1 = width2));\n        }\n\n        window.addEventListener('resize', resized);\n        return () => window.removeEventListener('resize', resized);\n    });\n}\n\nexport function ObservableProvider({ notebook, children }) {\n    const [sharedRefs, setSharedRefs] = useState({});\n    const runtime = new Runtime(\n        Object.assign({}, new Library(), { width: width_cells })\n    );\n\n    useEffect(() => {\n        runtime.module(notebook, name => {\n            if (sharedRefs[name]) {\n                return new Inspector(sharedRefs[name]);\n            }\n        });\n        return () => runtime.dispose();\n    }, [runtime, sharedRefs, notebook]);\n\n    return (\n        <ObservableRuntimeContext.Provider value={{ setSharedRefs }}>\n            {children}\n        </ObservableRuntimeContext.Provider>\n    );\n}\n\nexport function ObservableCell({ cellName, styles, className }) {\n    const ref = useRef(null);\n    const { setSharedRefs } = useContext(ObservableRuntimeContext);\n\n    useEffect(() => {\n        setSharedRefs(prevRefs => ({ ...prevRefs, [cellName]: ref.current }));\n    }, [cellName, setSharedRefs]);\n\n    return <div ref={ref} style={styles} className={className} />;\n}\n\nexport function WithObservableProvider({ notebook, children }) {\n    return (\n        <ObservableProvider notebook={notebook}>{children}</ObservableProvider>\n    );\n}\n","import { graphql, useStaticQuery } from 'gatsby';\n\nexport const useSiteMetadata = () => {\n    const data = useStaticQuery(graphql`\n        query {\n            site {\n                siteMetadata {\n                    title\n                    description\n                    twitterUsername\n                    image\n                    siteUrl\n                }\n            }\n        }\n    `);\n\n    return data.site.siteMetadata;\n};\n","import React from 'react';\nimport { useSiteMetadata } from '../hooks/use-site-metadata';\n\nexport const SEO = ({ frontmatter }) => {\n    const {\n        title: defaultTitle,\n        description: defaultDescription,\n        image,\n        siteUrl,\n        twitterUsername,\n    } = useSiteMetadata();\n\n    const seo = {\n        title: frontmatter?.title || defaultTitle,\n        description: frontmatter?.description || defaultDescription,\n        image: `${siteUrl}${frontmatter?.image || image}`,\n        url: `${siteUrl}${frontmatter?.pathname || ``}`,\n        twitterUsername,\n        ...frontmatter,\n    };\n\n    const stylesheetLink = frontmatter?.stylesheet;\n\n    return (\n        <>\n            <title>{seo.title}</title>\n            <meta name=\"description\" content={seo.description} />\n            <meta name=\"image\" content={seo.image} />\n            {stylesheetLink && (\n                <link\n                    rel=\"stylesheet\"\n                    type=\"text/css\"\n                    href={`/styles/${stylesheetLink}`}\n                />\n            )}\n        </>\n    );\n};\n","import React from 'react';\n\nconst Subtitle = ({ children }) => {\n    const newChildren = React.Children.map(children, child => {\n        if (React.isValidElement(child) && child.type === 'p') {\n            // Remove the <p> wrapper that mdx adds by default\n            return child.props.children;\n        }\n        return child;\n    });\n\n    return (\n        <h2 className=\"text-xl font-sans font-normal text-gray-500 mb-8 mt-0\">\n            {newChildren}\n        </h2>\n    );\n};\n\nexport default Subtitle;\n","import React from \"react\";\n\n/**\n * Compact component that compares a single messy address with a list of\n * candidate addresses, allowing portions of each address to be arbitrary JSX.\n *\n * @param {{ messyAddress: React.ReactNode; candidates: Array<{ address: React.ReactNode; isMatch: boolean }> }} props\n */\nexport default function AddressCandidatesComparison({\n    messyAddress,\n    candidates = [],\n}) {\n    const preStyle = {\n        margin: 0,\n        padding: \"0.25rem\",\n        background: \"#f3f4f6\", // tailwind slate-100\n        borderRadius: \"0.25rem\",\n        fontFamily: \"monospace\",\n        fontSize: \"0.85rem\",\n        whiteSpace: \"pre-wrap\",\n        lineHeight: 1.3,\n    };\n\n    const labelStyle = {\n        fontWeight: 600,\n        fontSize: \"0.75rem\",\n        color: \"#374151\", // tailwind slate-700\n        letterSpacing: \"0.01em\",\n    };\n\n    const candidateLabel = candidates.length === 1 ? \"Candidate address\" : \"Candidate addresses\";\n    return (\n        <div\n            style={{\n                border: \"1px solid #d1d5db\", // tailwind slate-300\n                borderRadius: \"0.25rem\",\n                padding: \"0.75rem\",\n                maxWidth: \"40rem\",\n                display: \"flex\",\n                flexDirection: \"column\",\n                gap: \"0.75rem\",\n                fontSize: \"0.85rem\",\n                marginBottom: \"0.5em\", // add spacing under the component\n            }}\n        >\n            {/* Messy address */}\n            <div>\n                <span style={labelStyle}>Messy address</span>\n                <pre style={{ ...preStyle, marginTop: \"0.25rem\" }}>\n                    {messyAddress}\n                </pre>\n            </div>\n\n            {/* Candidate addresses */}\n            <div>\n                <span style={labelStyle}>{candidateLabel}</span>\n                <div\n                    style={{\n                        display: \"flex\",\n                        flexDirection: \"column\",\n                        gap: \"0.4rem\",\n                        marginTop: \"0.25rem\",\n                    }}\n                >\n                    {candidates.map(({ address, isMatch }, idx) => {\n                        const matchColor = \"#16a34a\"; // tailwind green-600\n                        const nonMatchTextColor = \"#7f1d1d\"; // tailwind red-800\n                        // Determine border and text color only if isMatch is explicitly true/false\n                        let borderStyle = \"1px solid transparent\";\n                        let textColor = undefined;\n                        let tick = \"\";\n                        let tickColor = undefined;\n                        if (isMatch === true) {\n                            borderStyle = `1px solid ${matchColor}`;\n                            tick = \"✅\";\n                            tickColor = matchColor;\n                        } else if (isMatch === false) {\n                            // No border, but red text for non-match\n                            textColor = nonMatchTextColor;\n                            tick = \"\";\n                            tickColor = nonMatchTextColor;\n                        }\n                        // If isMatch is undefined, no special formatting\n                        return (\n                            <div\n                                key={idx}\n                                style={{\n                                    display: \"flex\",\n                                    flexDirection: \"row\",\n                                    alignItems: \"stretch\",\n                                }}\n                            >\n                                {/* Numbering at the leftmost edge */}\n                                <span\n                                    style={{\n                                        fontFamily: \"inherit\",\n                                        fontWeight: 500,\n                                        fontSize: \"0.85rem\",\n                                        color: \"#6b7280\", // tailwind slate-500\n                                        minWidth: \"1.5rem\",\n                                        textAlign: \"right\",\n                                        marginRight: \"0.0rem\",\n                                        userSelect: \"none\",\n                                        display: \"flex\",\n                                        alignItems: \"flex-start\",\n                                        paddingTop: \"0.25rem\",\n                                    }}\n                                >\n                                    {idx + 1}.\n                                </span>\n                                <div\n                                    style={{\n                                        display: \"flex\",\n                                        flex: 1,\n                                        alignItems: \"center\",\n                                        gap: \"0.6rem\",\n                                        border: borderStyle,\n                                        borderRadius: \"0.25rem\",\n                                        padding: \"0.25rem\",\n                                    }}\n                                >\n                                    <pre\n                                        style={{\n                                            ...preStyle,\n                                            margin: 0,\n                                            color: textColor,\n                                        }}\n                                    >\n                                        {address}\n                                    </pre>\n                                    {/* Tick only for the match */}\n                                    <span\n                                        style={{\n                                            fontSize: \"1.1rem\",\n                                            lineHeight: 1,\n                                            color: tickColor,\n                                            userSelect: \"none\",\n                                            width: \"1.25rem\",\n                                            textAlign: \"center\",\n                                        }}\n                                    >\n                                        {tick}\n                                    </span>\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        </div>\n    );\n}\n","import React from \"react\";\n\n/**\n * Compact component that compares two addresses, allowing portions of each\n * address to be arbitrary JSX (e.g. <mark>…</mark>).\n *\n * @param {{ addressA: React.ReactNode; addressB: React.ReactNode; isMatch: boolean }} props\n */\nexport default function AddressComparison({ addressA, addressB, isMatch }) {\n    const colour = isMatch ? \"#16a34a\" : \"#dc2626\";\n    const word = isMatch ? \"match\" : \"non-match\";\n    const icon = isMatch ? \"✅\" : \"❌\";\n\n    const preStyle = {\n        margin: 0,\n        padding: \"0.25rem\",\n        background: \"#f3f4f6\",\n        borderRadius: \"0.25rem\",\n        fontFamily: \"monospace\",\n        fontSize: \"0.85rem\",\n        whiteSpace: \"pre-wrap\",\n        lineHeight: 1.3,\n    };\n\n\n\n    return (\n        <div\n            style={{\n                border: `1px solid ${colour}`,\n                borderRadius: \"0.25rem\",\n                padding: \"0.5rem\",\n                display: \"flex\",\n                alignItems: \"center\",\n                gap: \"0.75rem\",\n                maxWidth: \"40rem\",\n            }}\n        >\n            {/* address column */}\n            <div style={{ flex: 1 }}>\n                <pre style={preStyle}>{addressA}</pre>\n                <pre style={{ ...preStyle, marginTop: \"0.35rem\" }}>\n                    {addressB}\n                </pre>\n            </div>\n\n            {/* indicator column */}\n            <div\n                style={{\n                    display: \"flex\",\n                    flexDirection: \"column\",\n                    alignItems: \"center\",\n                    color: colour,\n                    fontWeight: 700,\n                    fontSize: \"0.8rem\",\n                    userSelect: \"none\",\n                    minWidth: \"4.5rem\",\n                }}\n            >\n                <span style={{ fontSize: \"1.4rem\", lineHeight: 1 }}>{icon}</span>\n                {word}\n            </div>\n        </div>\n    );\n}\n"],"names":["_1","md","_usage","_gain","Inputs","range","value","step","label","_now","_gain2","gain","_currentgain","toFixed","_7","_basics","_button","_clicks","button","_11","clicks","_toggle","_mute","toggle","_14","mute","_checkbox","_flavors","checkbox","_17","flavors","_radio","_flavor","radio","_20","flavor","_range","_n","_23","n","_select","_homeState","stateNames","select","concat","_26","homeState","_visitedStates","multiple","_28","visitedStates","_29","_name","text","placeholder","_31","name","_32","_bio","textarea","_34","bio","_35","_birthday","date","_37","birthday","_38","_color","color","_40","_41","_file","file","accept","required","_data","csv","typed","_tables","_45","_search","capitals","search","_47","_48","_rows","table","_50","rows","_techniques","_52","_53","_54","html","map","Name","Author","Description","sort","Infinity","layout","width","format","title","link","_55","_56","_capitals","FileAttachment","tsv","_stateNames","d","State","_59","_Button","_Toggle","_Radio","_Checkbox","_Range","_Select","_Text","_Textarea","_Search","_Table","_Input","_bind","_disposal","_svg","htl","_html","runtime","observer","main","module","fileAttachments","Map","url","URL","mimeType","toString","this","builtin","get","variable","define","G","_","input","_test_addresses","initial_list_of_addresses","el","resize","spellcheck","querySelector","style","maxHeight","ta","setProperty","_messy_address_to_lookup","_trie_basic","show_trie_using_d3","addressTrie","_trie_with_route","show_highlighted_trie_using_d3","messy_address_to_lookup","_show_highlighted_trie_using_d3","d3","traceAddressRoute","renderTraceStepsTable","FAILURE_COLOR","renderTrie","trie","nodeSize","paddingRight","bulletRadius","terminalColor","highlightSet","Set","highlightColor","highlightFillOpacity","data","rootTrie","nodeToObj","node","children","Array","from","entries","tok","child","isArray","kids","uprn","cnt","term","nodeRef","root","hierarchy","eachBefore","i","index","nodes","descendants","columns","x","fill","Math","max","length","c","height","svg","create","attr","highlightNode","has","append","selectAll","links","join","source","depth","target","gNode","insert","onPath","ancestors","reverse","a","messyAddress","skipMinLocalCount","skipMaxInWalk","minMatchedTokens","entryMinLocalCount","maxTrieEntryDepth","skipCntThreshold","maxMissingTailTokensInMessy","traceOptions","renderOptions","trimmed","trim","unifiedTraceOptions","maxStartOffset","trace","matched","Boolean","outcome","computedHighlightColor","highlightNodes","route","pathNodes","add","renderParams","container","document","createElement","display","flexDirection","gap","status","fontFamily","fontSize","whiteSpace","appendChild","addrBlock","messyLine","textContent","canonicalLine","summary","matchedTokens","tableEl","_renderTraceStepsTable","options","showReason","showDetails","tableClass","className","borderCollapse","marginTop","makeCell","tag","align","cell","border","padding","textAlign","header","steps","actionText","action","reason","row","ordered","idx","String","token","reasonText","replace","details","event","type","lookaheadToken","push","nodeAfter","_traceAddressRoute","toOriginalIndex","reversedIndex","total","sortUnique","indices","b","buildResult","attempt","context","tokens","reversedTokens","parameters","attemptsTried","nodeBefore","markStep","originalIndex","updates","evt","events","via","rev","startIndex","remainingReason","finalIndex","buildSteps","decision","finalNode","remainingTokens","isLeaf","attemptsConsidered","entryDepth","entryPath","consumedCount","consumedIndices","skippedCount","skippedIndices","skippedTokens","split","filter","size","maxDepth","path","stack","pop","values","nextPath","collectEntryNodes","attemptCounter","bestAttempt","considerBest","candidate","currentMatched","candidateMatched","contextBase","maxStart","min","start","entryIndex","entry","slice","skipsUsed","attemptId","entryNode","failure","recordEvent","prevNode","nodeHasChildren","lookaheadIndex","skipTarget","skippedOriginalIndex","consumedOriginalIndex","consumedSorted","skippedSorted","highestConsumedIndex","tailIgnoredCount","trailingWithinLimit","eventIndex","findIndex","mismatchEvt","limit","failureReason","_addressTrie","test_addresses","buildReverseTrie","line","_buildReverseTrie","TrieNode","constructor","set","dfsCnt","build","Node","_show_trie_using_d3","_example_trie_for_blog","trie_for_blog","_trie_for_blog","hard_coded_addresses","_hard_coded_addresses","_initial_list_of_addresses","_initial_list_of_addresses_md","child1","import","Head","props","React","SEO","frontmatter","pageContext","_createMdxContent","_components","Object","assign","h1","p","code","pre","ul","li","h2","strong","_provideComponents","components","WithObservableProvider","notebook","ObservableCell","cellName","href","MDXLayout","ObservableRuntimeContext","createContext","mountId","stdlib","Library","width_cells","Generators","observe","notify","width1","getElementById","clientWidth","resized","width2","window","addEventListener","removeEventListener","ObservableProvider","_ref","sharedRefs","setSharedRefs","useState","Runtime","useEffect","Inspector","dispose","Provider","_ref2","styles","ref","useRef","useContext","prevRefs","current","_ref3","defaultTitle","description","defaultDescription","image","siteUrl","twitterUsername","useStaticQuery","site","siteMetadata","seo","pathname","stylesheetLink","stylesheet","content","rel","newChildren","AddressCandidatesComparison","candidates","preStyle","margin","background","borderRadius","lineHeight","labelStyle","fontWeight","letterSpacing","candidateLabel","maxWidth","marginBottom","address","isMatch","matchColor","nonMatchTextColor","textColor","tickColor","borderStyle","tick","key","alignItems","minWidth","marginRight","userSelect","paddingTop","flex","AddressComparison","addressA","addressB","colour","word","icon"],"sourceRoot":""}