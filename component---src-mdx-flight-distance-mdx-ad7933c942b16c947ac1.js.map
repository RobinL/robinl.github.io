{"version":3,"file":"component---src-mdx-flight-distance-mdx-ad7933c942b16c947ac1.js","mappings":"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","sources":["webpack://robinlinacre/./node_modules/@robinl/flight-distance-calculator/65265a2092377a48@68.js","webpack://robinlinacre/./node_modules/@robinl/flight-distance-calculator/35510f059fbb566b@520.js","webpack://robinlinacre/./node_modules/@robinl/flight-distance-calculator/cf52e2d16b5b9cbe@1090.js","webpack://robinlinacre/./src/mdx/flight_distance.mdx","webpack://robinlinacre/./src/components/ObservableCells.jsx","webpack://robinlinacre/./src/hooks/use-site-metadata.jsx","webpack://robinlinacre/./src/components/SEO.jsx"],"sourcesContent":["// https://observablehq.com/@robinl/flights-globe-chart-function@68\nfunction _1(md){return(\nmd`# Flights globe chart function`\n)}\n\nfunction _chart(DOM,width,height,d3,projection,sphere,land,resample,drag){return(\nfunction(routes) {\n  const context = DOM.context2d(width, height);\n  const path = d3.geoPath(projection, context);\n\n  let colour_scale = d3\n    .scaleSequential(d3.interpolateOrRd)\n    .domain(d3.extent(routes, d => d[\"distance\"]));\n\n  function render() {\n    context.clearRect(0, 0, width, height);\n\n    context.beginPath(),\n      path(sphere),\n      (context.fillStyle = \"#fff\"),\n      context.fill();\n\n    context.beginPath(),\n      path(land),\n      (context.fillStyle = \"#000\"),\n      context.fill();\n\n    context.beginPath(), path(sphere), context.stroke();\n\n    routes.forEach(function(d) {\n      let coordinates = [\n        [d[\"lng_from\"], d[\"lat_from\"]],\n        [d[\"lng_to\"], d[\"lat_to\"]]\n      ];\n\n      let resampled = resample(coordinates);\n\n      let mid_point_with_drift = [\n        resampled[\"after\"][1][0] + (d[\"lat_from\"] + d[\"lng_to\"]) / 100,\n        resampled[\"after\"][1][1] + (d[\"lat_from\"] + d[\"lng_to\"]) / 100\n      ];\n\n      resampled[\"after\"][1] = mid_point_with_drift;\n\n      let route = {\n        type: \"LineString\",\n        coordinates: resampled[\"after\"]\n      };\n      context.lineWidth = 1.5;\n      context.lineO;\n      context.beginPath(),\n        path(route),\n        (context.strokeStyle = colour_scale(d[\"distance\"])),\n        context.stroke();\n    });\n\n    context.lineWidth = 1;\n    context.strokeStyle = \"#000000\";\n  }\n\n  return d3\n    .select(context.canvas)\n    .call(drag(projection).on(\"drag.render\", render))\n    .call(render)\n    .node();\n}\n)}\n\nfunction _4(md){return(\nmd`Imports`\n)}\n\nfunction _d3(require){return(\nrequire(\"d3@5\")\n)}\n\nfunction _topojson(require){return(\nrequire(\"topojson-client@3\")\n)}\n\nfunction _world(d3){return(\nd3.json(\"https://unpkg.com/world-atlas@1/world/110m.json\")\n)}\n\nfunction _land(topojson,world){return(\ntopojson.feature(world, world.objects.land)\n)}\n\nfunction _drag(versor,d3){return(\nfunction drag(projection) {\n  let v0, q0, r0;\n\n  function dragstarted() {\n    v0 = versor.cartesian(projection.invert(d3.mouse(this)));\n    q0 = versor((r0 = projection.rotate()));\n  }\n\n  function dragged() {\n    const v1 = versor.cartesian(projection.rotate(r0).invert(d3.mouse(this)));\n    const q1 = versor.multiply(q0, versor.delta(v0, v1));\n    projection.rotate(versor.rotation(q1));\n  }\n\n  return d3\n    .drag()\n    .on(\"start\", dragstarted)\n    .on(\"drag\", dragged);\n}\n)}\n\nfunction _height(width){return(\nwidth * 0.6\n)}\n\nfunction _projection(d3,width,height,sphere){return(\nd3\n  .geoEqualEarth()\n  .fitExtent([[1, 1], [width - 1, height - 1]], sphere)\n  .translate([width / 2, height / 2])\n  .rotate([0, 0])\n  .precision(0.1)\n)}\n\nfunction _sphere(){return(\n{ type: \"Sphere\" }\n)}\n\nfunction _resample(projection,d3){return(\nfunction resample(coordinates) {\n  var i = 0,\n    n = coordinates.length,\n    before = [],\n    after = [];\n  while (++i < n) {\n    var c0 = coordinates[i - 1].slice(),\n      c1 = coordinates[i].slice(),\n      p0 = projection(c0),\n      p1 = projection(c1),\n      x10 = p1[0] - p0[0],\n      y10 = p1[1] - p0[1],\n      d1 = x10 * x10 + y10 * y10;\n    before.push(c0);\n    after.push(c0);\n    if (d1 > 4 * .1) {\n      // linear distance check\n      var c2 = d3.geoInterpolate(c0, c1)(.5),\n        p2 = projection(c2),\n        x20 = p2[0] - p0[0],\n        y20 = p2[1] - p0[1],\n        dz = y10 * x20 - x10 * y20;\n      if ((dz * dz) / d1 > .1) {\n        // perpendicular distance check\n        var t = (x20 * x10 + y20 * y10) / d1;\n        before.push(\n          projection.invert((c2.resampled = [p0[0] + t * x10, p0[1] + t * y10]))\n        );\n        after.push(c2);\n      }\n    }\n  }\n  if (n) before.push(c1), after.push(c1);\n  return { before: before, after: after };\n}\n)}\n\nfunction _versor(require){return(\nrequire(\"versor@0.0.3\")\n)}\n\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  main.variable(observer()).define([\"md\"], _1);\n  main.variable(observer(\"chart\")).define(\"chart\", [\"DOM\",\"width\",\"height\",\"d3\",\"projection\",\"sphere\",\"land\",\"resample\",\"drag\"], _chart);\n  main.variable(observer()).define([\"md\"], _4);\n  main.variable(observer(\"d3\")).define(\"d3\", [\"require\"], _d3);\n  main.variable(observer(\"topojson\")).define(\"topojson\", [\"require\"], _topojson);\n  main.variable(observer(\"world\")).define(\"world\", [\"d3\"], _world);\n  main.variable(observer(\"land\")).define(\"land\", [\"topojson\",\"world\"], _land);\n  main.variable(observer(\"drag\")).define(\"drag\", [\"versor\",\"d3\"], _drag);\n  main.variable(observer(\"height\")).define(\"height\", [\"width\"], _height);\n  main.variable(observer(\"projection\")).define(\"projection\", [\"d3\",\"width\",\"height\",\"sphere\"], _projection);\n  main.variable(observer(\"sphere\")).define(\"sphere\", _sphere);\n  main.variable(observer(\"resample\")).define(\"resample\", [\"projection\",\"d3\"], _resample);\n  main.variable(observer(\"versor\")).define(\"versor\", [\"require\"], _versor);\n  return main;\n}\n","function _1(md,opinionPolls){return(\nmd`# Tables\n\n_This notebook is ready for public input - hit me up at @tmcw on [the forum](https://talk.observablehq.com/t/it-would-be-cool-if-table-tags-had-a-spiffy-default-style/588/4), twitter, or elsewhere to give input. You can use it, but the API is likely to change soon, so use this exact version:_\n\n\\`\\`\\`js\nimport {table} from \"@tmcw/tables@513\"\n\\`\\`\\`\n\nGood tables are good. Making a good table relies on good defaults, good options, and lots of nitpicky finishing touches. This is a notebook that tries to provide a good starting point for table defaults, a fast drop-in read-only data table for data analysis.\n\n### Table API:\n\n- **data** \\`Array<Object>\\`: with consistent data types across rows\n- **options**:\n  - **style**: \\`enum(normal, compact)\\`: a string value of a default style. By default, tables are designed for comfortable reading with large fonts. To display more information in less screen space, use compact.\n  - **header** \\`boolean\\` (default true): set to false to entirely omit the table header.\n  - **sortable** \\`boolean\\` (default false): make columns sortable\n  - **paged** \\`number\\` (default 25): split data by pages, if it has more than the given number of items.\n  - **rank** \\`boolean\\` (default false): show 1… rank numbers in the first column. Cannot be combined with sortable.\n  - **columns** \\`Object\\`: column-specific configuration, indexed by key:\n    - \\`[key]\\`\n      - **formatter** \\`Function(value, rowIndex, row) ⇒ output\\`: value formatter for cells. This can return a string, number, or element. If it returns a \\`<td>\\` element, that element can ‘take over’ the cell.\n      - **title** \\`string\\`: alternate text for table header - by default, the header cell is named after the key in the data object\n      - **type** \\`string\\`: override auto-detected type for this column - display numbers as strings, etc. Optional, should be one of 'string' or 'number'.\n\nAn example of a dataset that table() easily accepts:\n\n\\`\\`\\`json\n${JSON.stringify(opinionPolls.slice(0, 2), null, 2)}\n\\`\\`\\`\n`\n)}\n\nfunction _2(md){return(\nmd`\n<br /><br />\n\n*Click the caret on the left to view code for any example.*\n\n\n### Titanic survivors\n\nThis is a table of the Titanic survivors dataset - it shows the data in natural order, first, but the columns are sortable. It shows usage of custom formatters for the Name and Fare columns. The Fare column formatter uses the rowIndex to determine the appropriate format based on the row number. (i.e. $ for the first row only).`\n)}\n\nfunction _3(table,titanicData,d3,html){return(\ntable(titanicData, {\n  sortable: true,\n  columns: {\n    Fare: {\n      formatter(val, i) {\n        // A formatter that changes its behavior based on the row index,\n        // so we don’t repeat the $ for every row.\n        return i === 0 ? d3.format('$.2f')(val) :  d3.format('.2f')(val);\n      }\n    },\n    Name: {\n      formatter(val) {\n        // Formatters can also return HTML values! Here’s\n        // one that highlights first names.\n        let parts = val.match(/([^,]*)\\,(.*)/);\n        return html`<strong>${parts[1]}</strong>, ${parts[2]}`;\n      }\n    }\n  }\n})\n)}\n\nfunction _4(md){return(\nmd`<br /><br />\n\n### Spotify top charts\n\nThis is a table of the top-streamed tracks from [Spotify](https://spotifycharts.com/regional) today. It shows usage of a custom formatter, as well as the \\`rank\\` option to add an unlabeled rank column. This also sets the \\`style\\` to compact because we’re displaying a bunch of rows.`\n)}\n\nfunction _5(table,spotify,html,d3){return(\ntable(spotify, {\n  rank: true,\n  style: 'compact',\n  columns: {\n    Track: {\n      formatter(val, i) {\n        return html`<strong>${val[0]}</strong> by ${val[1]}`;\n      }\n    },\n    Streams: {\n      formatter: d3.format(',')\n    }\n  }\n})\n)}\n\nfunction _table(defaultOptions,html,th,identity){return(\n(data, options) => {\n  options = Object.assign({}, defaultOptions, options);\n  const { sortable, rank, paged } = options;\n  let sortKey = undefined;\n  let sortDirection = true;\n  let page = 0;\n  if (sortable && rank) {\n    throw new Error(\"A table can either be ranked or sortable, but not both\");\n  }\n  let columns = Object.keys(data[0]).map(key => {\n    const opts = options.columns[key] || {};\n    return {\n      key: key,\n      type: opts.type || typeof data[0][key],\n      options: opts\n    };\n  });\n\n  function bake() {\n    if (sortKey) {\n      data = data.slice().sort((a, b) => {\n        let as = a[sortKey];\n        let bs = b[sortKey];\n        // make this sort stable\n        if (as == bs) return JSON.stringify(a).localeCompare(JSON.stringify(b));\n        let res = as > bs ? 1 : as < bs ? -1 : 0;\n        if (sortDirection) res = -res;\n        return res;\n      });\n    }\n    let rows = data.slice(page * paged, page * paged + paged);\n    let pages = Math.ceil(data.length / paged);\n    return html`<div><div>\n      <style>\n.pretty-pager {\n  padding-top: 1rem;\n}\n.pretty-pager button {\n  cursor: pointer;\n  border-radius: 3px;\n  border: 1px solid #fff;\n  font-size: inherit;\n}\n.pretty-pager button:hover {\n  border: 1px solid #888;\n}\n.pretty-table.normal {\n  font-size: 15px;\n}\n.pretty-table.normal th,\n.pretty-table.normal td {\n  padding: 3px 2px;\n}\n.pretty-table th,\n.pretty-table td {\n  vertical-align: top;\n}\n.pretty-table thead th {\n  text-transform: uppercase;\n  font-weight:500;\n}\n.pretty-table thead th.column-type-number string {\n  order: 1;\n}\n.pretty-table th.sortable {\n  cursor: pointer;\n}\n.pretty-table thead th.column-type-number,\n.pretty-table tbody td.cell-type-number,\n.pretty-table tbody td.cell-rank {\n  text-align:right;\n}\n.pretty-table tbody td.cell-type-number,\n.pretty-table tbody td.cell-rank {\n  font-family: menlo,consolas,monaco,monospace;\n  font-size: 90%;\n}\n.pretty-table tbody td.cell-rank {\n  padding-right: 1em;\n  color: #666;\n}\n\n</style>\n        <table class='pretty-table ${options.style}'>\n          ${\n            options.header === false\n              ? ``\n              : html`<thead>\n            ${rank ? html`<th></th>` : \"\"}\n            ${columns.map(c => {\n              return th(c, sortKey, sortDirection, sortable);\n            })}\n          </thead>`\n          }\n          <tbody>\n            ${rows.map(\n              (row, i) => html`<tr>\n              ${rank ? html`<td class='cell-rank'>${i + 1}</td>` : \"\"}\n              ${columns.map(c => {\n                let displayValue = (c.options.formatter || identity)(\n                  row[c.key],\n                  i,\n                  row\n                );\n                if (\n                  displayValue instanceof window.HTMLElement &&\n                  displayValue.tagName == \"TD\"\n                ) {\n                  return displayValue;\n                }\n                return html`<td class='cell-type-${\n                  c.type\n                }'>${displayValue}</td>`;\n              })}\n            </tr>`\n            )}\n          </tbody>\n        </table>\n        ${\n          pages\n            ? html`<div class='pretty-pager'>\n          <button data-action=\"next\">Previous</button>\n          ${Array.from({ length: pages }).map(\n            (_, i) => html`<button data-page=\"${i + 1}\">${i + 1}</button>`\n          )}\n          <button data-action=\"previous\">Next</button>\n        </div>`\n            : \"\"\n        }\n      </div></div>`;\n  }\n\n  let dom = bake();\n\n  function rerender() {\n    dom.firstChild.remove();\n    dom.appendChild(bake().firstChild);\n  }\n\n  dom.addEventListener(\"click\", e => {\n    if (e.target.tagName === \"TH\" && sortable) {\n      if (sortKey == e.target.dataset.key) {\n        sortDirection = !sortDirection;\n      }\n      sortKey = e.target.dataset.key;\n      rerender();\n    }\n    if (e.target.tagName === \"BUTTON\") {\n      if (e.target.dataset.action) {\n        switch (e.target.dataset.action) {\n          case \"next\":\n            page++, rerender();\n            break;\n          case \"previous\":\n            page--, rerender();\n            break;\n        }\n      } else if (e.target.dataset.page) {\n        (page = parseInt(e.target.dataset.page)), rerender();\n      }\n    }\n  });\n\n  return dom;\n}\n)}\n\nfunction _7(md){return(\nmd`<br /><br />\n\n### Kenya data\n\nDemonstration of [data from Quartz Atlas](https://www.theatlas.com/charts/BJGldhdsG): demonstrates usage of the _type_ override, a custom formatter, and overriding titles.`\n)}\n\nfunction _8(table,kenyaData,html,d3){return(\ntable(kenyaData, {\n  columns: {\n    method: {\n      title: ''\n    },\n    percent: {\n      title: 'Method of transfer (2006)',\n      type: 'string',\n      formatter(val, i) {\n        return html`<div style='display:flex;align-items:center;height:1.5em;'>\n          <div style='width:${val}%;height:1em;background:#5f27cd;margin-right:0.5em;'></div>${i == 0 ? d3.format('.0%')(val / 100) : val}\n        </div>`;\n      }\n    }\n  }\n})\n)}\n\nfunction _9(md){return(\nmd`<br /><br />\n\n### Heat-tables\n\nA tribute to the [538](https://fivethirtyeight.com/features/the-year-in-trumps-approval-rating/) table style for opinion polls. Demonstrates that if a cell formatter returns a \\`<td>\\` element, it can take over the entire cell to do things like setting background colors.\n\nThis also demonstrates using a table with viewof: click a name to view the person below.\n`\n)}\n\nfunction _name(table,opinionPolls,html,d3)\n{\n  \n  let t = table(opinionPolls, {\n    columns: {\n      name: {\n        formatter(value, i, row) {\n          let elem = html`<a style='cursor:pointer'>${value}</a>`;\n          elem.addEventListener('click', () => {\n            t.value = row;\n            t.dispatchEvent(new CustomEvent('input'));\n          });\n          return elem;\n        }\n      },\n      elected: {\n        type: 'string'\n      },\n      approval: {\n        formatter(val, i) {\n          let color = d3.scaleLinear()\n            .domain([-2, 0, 2])\n            .range([\"#f4c8cf\", \"#f8f8f8\", \"#c8f4cb\"]);\n          return html`<td style='background:${color(val)};text-align:right;padding:2px 5px;'>${val}</td>`;\n        }\n      }\n    }\n  });\n  \n  return t;\n}\n\n\nfunction _11(name,md){return(\nname && md`## ${name.name}\n\nI was elected ${name.elected} and have an approval rating of ${name.approval}.`\n)}\n\nfunction _th(html){return(\n(c, sortKey, sortDirection, sortable) => {\n  let {\n    options: { title }\n  } = c;\n  let sortIndicator = sortKey && sortDirection ? \"↑\" : \"↓\";\n  let arrow = html`<span style='${\n    sortKey === c.key ? \"\" : \"visibility:hidden\"\n  }'>${sortIndicator}</span>`;\n  let displayedTitle = title !== undefined ? title : c.key;\n  return c.type === \"number\"\n    ? html`<th\n      data-key=\"${c.key}\"\n      class='column-type-${c.type} ${sortable ? \"sortable\" : \"\"}'>\n        ${arrow}${displayedTitle}\n    </th>`\n    : html`<th\n      data-key=\"${c.key}\"\n      class='column-type-${c.type} ${sortable ? \"sortable\" : \"\"}'>\n        ${displayedTitle}${arrow}\n    </th>`;\n}\n)}\n\nfunction _style(){return(\n`\n\n`\n)}\n\nfunction _14(md){return(\nmd`Here's [my are.na collection](https://www.are.na/tom-macwright/good-looking-tables) of inspirations. My key observations:\n\n- ✔ Numeric columns should really have monospaced numbers: it’s important for numbers to line up\n- ✔ Most data tables use title-case, bold or semibold headers\n\nNecessary perks:\n\n- Good support for N/A values\n- code-based reordering for columns\n\nStretch goals:\n\n- ✔️ Sorting\n- Selecting of rows\n\nI don’t see any of the following in the wild:\n\n- Vertical borders\n- Alternate row coloring`\n)}\n\nfunction _defaultOptions(){return(\n{ columns: {}, style: 'normal', paged: 25 }\n)}\n\nfunction _identity(){return(\ni => i\n)}\n\nfunction _17(md){return(\nmd`Helpers (not used in export path)`\n)}\n\nfunction _d3(require){return(\nrequire('d3@5')\n)}\n\nfunction _19(md){return(\nmd`Datasets`\n)}\n\nasync function _spotifyCharts(d3,FileAttachment){return(\nd3.csv(\n  await FileAttachment(\"regional-global-daily-latest@2.csv\").url()\n)\n)}\n\nfunction _spotify(spotifyCharts){return(\nspotifyCharts.map(row => {\n  return {\n    Track: [row['Track Name'], row['Artist']],\n    Streams: +row.Streams\n  };\n})\n)}\n\nfunction _kenyaData(){return(\n[\n  { method: \"Hand\", percent: 58 },\n  { method: \"Bus\", percent: 27 },\n  { method: \"Post office, money order\", percent: 24 },\n  { method: \"Direct deposit\", percent: 11 },\n  { method: \"Money transfer services\", percent: 9 },\n  { method: \"Cheque\", percent: 4 },\n  { method: \"Someone else's account\", percent: 3 }\n]\n)}\n\nfunction _opinionPolls(){return(\n['Barney', 'Homer', 'Bart', 'Lisa', 'Marge'].map((name, i) => ({ name, elected: 1990 + i * 5, approval: i - 2 }))\n)}\n\nfunction _titanicData(d3){return(\nd3.csvParse(`PassengerId,Survived,Pclass,Name,Sex,Age,SibSp,Parch,Ticket,Fare,Cabin,Embarked\n1,0,3,\"Braund, Mr. Owen Harris\",male,22,1,0,A/5 21171,7.25,,S\n2,1,1,\"Cumings, Mrs. John Bradley (Florence Briggs Thayer)\",female,38,1,0,PC 17599,71.2833,C85,C\n3,1,3,\"Heikkinen, Miss. Laina\",female,26,0,0,STON/O2. 3101282,7.925,,S\n4,1,1,\"Futrelle, Mrs. Jacques Heath (Lily May Peel)\",female,35,1,0,113803,53.1,C123,S\n5,0,3,\"Allen, Mr. William Henry\",male,35,0,0,373450,8.05,,S\n6,0,3,\"Moran, Mr. James\",male,,0,0,330877,8.4583,,Q\n7,0,1,\"McCarthy, Mr. Timothy J\",male,54,0,0,17463,51.8625,E46,S\n8,0,3,\"Palsson, Master. Gosta Leonard\",male,2,3,1,349909,21.075,,S`).map(({ Age, Name, Fare }) => ({\n  Name,\n  Age: +Age,\n  Fare: +Fare\n}))\n)}\n\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  main.variable(observer()).define([\"md\",\"opinionPolls\"], _1);\n  main.variable(observer()).define([\"md\"], _2);\n  main.variable(observer()).define([\"table\",\"titanicData\",\"d3\",\"html\"], _3);\n  main.variable(observer()).define([\"md\"], _4);\n  main.variable(observer()).define([\"table\",\"spotify\",\"html\",\"d3\"], _5);\n  main.variable(observer(\"table\")).define(\"table\", [\"defaultOptions\",\"html\",\"th\",\"identity\"], _table);\n  main.variable(observer()).define([\"md\"], _7);\n  main.variable(observer()).define([\"table\",\"kenyaData\",\"html\",\"d3\"], _8);\n  main.variable(observer()).define([\"md\"], _9);\n  main.variable(observer(\"viewof name\")).define(\"viewof name\", [\"table\",\"opinionPolls\",\"html\",\"d3\"], _name);\n  main.variable(observer(\"name\")).define(\"name\", [\"Generators\", \"viewof name\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"name\",\"md\"], _11);\n  main.variable(observer(\"th\")).define(\"th\", [\"html\"], _th);\n  main.variable(observer(\"style\")).define(\"style\", _style);\n  main.variable(observer()).define([\"md\"], _14);\n  main.variable(observer(\"defaultOptions\")).define(\"defaultOptions\", _defaultOptions);\n  main.variable(observer(\"identity\")).define(\"identity\", _identity);\n  main.variable(observer()).define([\"md\"], _17);\n  main.variable(observer(\"d3\")).define(\"d3\", [\"require\"], _d3);\n  main.variable(observer()).define([\"md\"], _19);\n  main.variable(observer(\"spotifyCharts\")).define(\"spotifyCharts\", [\"d3\",\"FileAttachment\"], _spotifyCharts);\n  main.variable(observer(\"spotify\")).define(\"spotify\", [\"spotifyCharts\"], _spotify);\n  main.variable(observer(\"kenyaData\")).define(\"kenyaData\", _kenyaData);\n  main.variable(observer(\"opinionPolls\")).define(\"opinionPolls\", _opinionPolls);\n  main.variable(observer(\"titanicData\")).define(\"titanicData\", [\"d3\"], _titanicData);\n  return main;\n}\n","// https://observablehq.com/@robinl/flight-distance-calculator@1090\nimport define1 from \"./65265a2092377a48@68.js\";\nimport define2 from \"./35510f059fbb566b@520.js\";\n\nfunction _title(md){return(\nmd`# Flight distance calculator`\n)}\n\nfunction _2(md){return(\nmd`*A final version of this notebook can be viewed on my blog [here](https://www.robinlinacre.com/flight_distance/).*`\n)}\n\nfunction _flights_list(html,options,get_icao_from_value)\n{\n  const dep_box = html`\n\n         <input name=\"dep\" type=\"text\" autocomplete=\"off\" \n          placeholder=\"Choose departure airport\" style=\"font-size: 1em;\" list=options>\n          <datalist id=\"options\">\n              ${options.map(d =>\n                Object.assign(html`<option>`, {\n                  value: d\n                })\n              )}\n          </datalist>`;\n\n  const arr_box = html`<input name=\"arr\" type=\"text\" autocomplete=\"off\" \n          placeholder=\"Choose arrival airport\" style=\"font-size: 1em;\" list=options>\n          <datalist id=\"options\">\n              ${options.map(d =>\n                Object.assign(html`<option>`, {\n                  value: d\n                })\n              )}\n          </datalist>`;\n\n  const add_to_list = html`<input type=\"button\" value=\"Add flight\">`;\n  const reset_list = html`<input type=\"button\" value=\"Clear all flights\">`;\n  const empty_inputs = html`<input type=\"button\" value=\"Clear current inputs\">`;\n  const switch_inputs = html`<input type=\"button\" value=\"Switch departure and arrival airports\">`;\n\n  const div = html`<p>${dep_box} ${arr_box}<br/>${add_to_list}${reset_list}${empty_inputs}${switch_inputs}</p>`;\n\n  add_to_list.onclick = () => {\n    let dep_value = dep_box.children[0].value;\n    let arr_value = arr_box.children[0].value;\n\n    if (dep_value != \"\" && arr_value != \"\") {\n      div.value.push([\n        get_icao_from_value(dep_value),\n        get_icao_from_value(arr_value)\n      ]);\n    } else {\n      throw \"Must select both a departure and arrival airport\";\n    }\n\n    div.dispatchEvent(new CustomEvent('input'));\n  };\n\n  empty_inputs.onclick = () => {\n    dep_box.children[0].value = \"\";\n    arr_box.children[0].value = \"\";\n  };\n\n  switch_inputs.onclick = () => {\n    let dval = dep_box.children[0].value;\n    dep_box.children[0].value = arr_box.children[0].value;\n    arr_box.children[0].value = dval;\n  };\n\n  reset_list.onclick = () => {\n    div.value = [];\n    dep_box.children[0].value = \"\";\n    arr_box.children[0].value = \"\";\n    div.dispatchEvent(new CustomEvent('input'));\n  };\n  div.value = [];\n  return div;\n}\n\n\nfunction _selected_airports(flights_list,airports_icao_dict)\n{\n  return flights_list.map(d => [\n    airports_icao_dict.get(d[0]),\n    airports_icao_dict.get(d[1])\n  ]);\n}\n\n\nfunction _table_of_distances(data_for_table,table,md)\n{\n  if (data_for_table.length > 0) {\n    return table(data_for_table);\n  } else {\n    return md`Add a flight to display flight data here.`;\n  }\n}\n\n\nfunction _blurb(data_for_table,md,fmt_num,total_flight_miles,fmt_num_round,total_energy_usage,tonnes_co2)\n{\n  if (data_for_table.length > 0) {\n    return md`Your total flight distance is ${fmt_num(\n      total_flight_miles\n    )} miles.  If flying economy, this will have required around ${fmt_num_round(\n      total_energy_usage\n    )} kwh of energy, and the total co2 emissions will be around ${fmt_num_round(\n      tonnes_co2\n    )} tonnes. `;\n  } else {\n    return md``;\n  }\n}\n\n\nfunction _selected_airports_with_distances(selected_airports,getDistanceFromLatLonInMiles)\n{\n  let sa = selected_airports.map(function(d) {\n    let airport0 = d[0];\n    let airport1 = d[1];\n\n    let new_dict = {};\n\n    new_dict[\"from\"] = airport0.name;\n    new_dict[\"to\"] = airport1.name;\n\n    for (const [key, value] of Object.entries(airport0)) {\n      new_dict[key + \"_from\"] = value;\n    }\n\n    for (const [key, value] of Object.entries(airport1)) {\n      new_dict[key + \"_to\"] = value;\n    }\n    let lat1 = new_dict[\"lat_from\"];\n    let lng1 = new_dict[\"lng_from\"];\n    let lat2 = new_dict[\"lat_to\"];\n    let lng2 = new_dict[\"lng_to\"];\n\n    new_dict[\"distance\"] = getDistanceFromLatLonInMiles(lat1, lng1, lat2, lng2);\n\n    return new_dict;\n  });\n  return sa;\n}\n\n\nfunction _data_for_table(selected_airports_with_distances,d3)\n{\n  let obj = selected_airports_with_distances.map(function(d) {\n    return {\n      from: d[\"name_from\"],\n      to: d[\"name_to\"],\n      miles: d3.format(\",.0f\")(d[\"distance\"])\n    };\n  });\n  return obj;\n}\n\n\nfunction _9(d3,selected_airports_with_distances){return(\nd3.csvFormat(selected_airports_with_distances)\n)}\n\nfunction _download_as_csv(DOM,serialize,selected_airports_with_distances){return(\nDOM.download(\n  serialize(selected_airports_with_distances),\n  \"flights\",\n  \"Download CSV\"\n)\n)}\n\nfunction _file_upload_blurb(md){return(\nmd`Bulk import previously created csv (needs at minimum \\`icao_from\\` and \\`icao_to\\` fields)`\n)}\n\nfunction _upload(html){return(\nhtml`<input type=file accept=\"text/csv\" >`\n)}\n\nasync function _csv_data(Files,upload,d3,$0)\n{\n  const text = await Files.text(upload);\n  const csv = d3.csvParse(text);\n\n  $0.value = csv.map(d => [d[\"icao_from\"], d[\"icao_to\"]]);\n\n  $0.dispatchEvent(new CustomEvent('input'));\n}\n\n\nfunction _flights_chart(chart,selected_airports_with_distances){return(\nchart(selected_airports_with_distances)\n)}\n\nfunction _total_flight_miles(d3,selected_airports_with_distances){return(\nd3.sum(selected_airports_with_distances, d => d.distance)\n)}\n\nfunction _total_energy_usage(eu,total_flight_miles){return(\neu.flying.flying_miles_to_kwh(total_flight_miles)\n)}\n\nfunction _kwh_to_kg_co2(eu){return(\nfunction(kwh) {\n  return kwh * eu.convert.per(\"kg_co2_from_jet_fuel/kwh\");\n}\n)}\n\nfunction _tonnes_co2(kwh_to_kg_co2,eu,total_flight_miles){return(\nkwh_to_kg_co2(eu.flying.flying_miles_to_kwh(total_flight_miles))  /\n  1000\n)}\n\nfunction _fmt_num(d3){return(\nd3.format(\",.0f\")\n)}\n\nfunction _fmt_num_round(d3){return(\nd3.format(\",.2r\")\n)}\n\nfunction _21(md){return(\nmd`### Modules & Imports`\n)}\n\nfunction _d3(require){return(\nrequire(\"d3\")\n)}\n\nfunction _eu(require){return(\nrequire(\"@robinl/energy_usage@0.1.6\")\n)}\n\nfunction _serialize(d3){return(\nfunction serialize (data) {\n return new Blob([d3.csvFormat(data)], {type: \"text/csv\"}) \n}\n)}\n\nfunction _getDistanceFromLatLonInMiles(){return(\nfunction getDistanceFromLatLonInMiles(lat1,lon1,lat2,lon2) {\n  \n  function deg2rad(deg) {\n    return deg * (Math.PI/180)\n  }\n  \n  var R = 6371; // Radius of the earth in km\n  var dLat = deg2rad(lat2-lat1);  // deg2rad below\n  var dLon = deg2rad(lon2-lon1); \n  var a = \n    Math.sin(dLat/2) * Math.sin(dLat/2) +\n    Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * \n    Math.sin(dLon/2) * Math.sin(dLon/2)\n    ; \n  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); \n  var d = R * c; // Distance in km\n  return d * 0.621371; //to miles\n}\n)}\n\nfunction _airports(d3){return(\nd3\n  .text(\n    \"https://raw.githubusercontent.com/jpatokal/openflights/master/data/airports.dat\"\n  )\n  .then(function(t) {\n    var header = \"id,name,city,country,iata,icao,lat,lng\\n\";\n\n    let t2 = header + t;\n    var data3 = d3.csvParse(t2, d3.autoType);\n\n    return data3;\n  })\n)}\n\nfunction _airports_icao_dict(airports){return(\nnew Map(airports.map(i => [i.icao, i]))\n)}\n\nfunction _options(airports){return(\nairports.map(\n  val => `${val.name} ${val.city} ${val.country} ${val.iata} (${val.icao})`\n)\n)}\n\nfunction _get_icao_from_value(){return(\nfunction(val) {\n  var myRegexp = /\\((\\w{4})\\)$/g;\n  var match = myRegexp.exec(val);\n  if (match) {\n    return match[1];\n  }\n}\n)}\n\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  main.variable(observer(\"title\")).define(\"title\", [\"md\"], _title);\n  main.variable(observer()).define([\"md\"], _2);\n  main.variable(observer(\"viewof flights_list\")).define(\"viewof flights_list\", [\"html\",\"options\",\"get_icao_from_value\"], _flights_list);\n  main.variable(observer(\"flights_list\")).define(\"flights_list\", [\"Generators\", \"viewof flights_list\"], (G, _) => G.input(_));\n  main.variable(observer(\"selected_airports\")).define(\"selected_airports\", [\"flights_list\",\"airports_icao_dict\"], _selected_airports);\n  main.variable(observer(\"table_of_distances\")).define(\"table_of_distances\", [\"data_for_table\",\"table\",\"md\"], _table_of_distances);\n  main.variable(observer(\"blurb\")).define(\"blurb\", [\"data_for_table\",\"md\",\"fmt_num\",\"total_flight_miles\",\"fmt_num_round\",\"total_energy_usage\",\"tonnes_co2\"], _blurb);\n  main.variable(observer(\"selected_airports_with_distances\")).define(\"selected_airports_with_distances\", [\"selected_airports\",\"getDistanceFromLatLonInMiles\"], _selected_airports_with_distances);\n  main.variable(observer(\"data_for_table\")).define(\"data_for_table\", [\"selected_airports_with_distances\",\"d3\"], _data_for_table);\n  main.variable(observer()).define([\"d3\",\"selected_airports_with_distances\"], _9);\n  main.variable(observer(\"download_as_csv\")).define(\"download_as_csv\", [\"DOM\",\"serialize\",\"selected_airports_with_distances\"], _download_as_csv);\n  main.variable(observer(\"file_upload_blurb\")).define(\"file_upload_blurb\", [\"md\"], _file_upload_blurb);\n  main.variable(observer(\"viewof upload\")).define(\"viewof upload\", [\"html\"], _upload);\n  main.variable(observer(\"upload\")).define(\"upload\", [\"Generators\", \"viewof upload\"], (G, _) => G.input(_));\n  main.variable(observer(\"csv_data\")).define(\"csv_data\", [\"Files\",\"upload\",\"d3\",\"viewof flights_list\"], _csv_data);\n  main.variable(observer(\"flights_chart\")).define(\"flights_chart\", [\"chart\",\"selected_airports_with_distances\"], _flights_chart);\n  main.variable(observer(\"total_flight_miles\")).define(\"total_flight_miles\", [\"d3\",\"selected_airports_with_distances\"], _total_flight_miles);\n  main.variable(observer(\"total_energy_usage\")).define(\"total_energy_usage\", [\"eu\",\"total_flight_miles\"], _total_energy_usage);\n  main.variable(observer(\"kwh_to_kg_co2\")).define(\"kwh_to_kg_co2\", [\"eu\"], _kwh_to_kg_co2);\n  main.variable(observer(\"tonnes_co2\")).define(\"tonnes_co2\", [\"kwh_to_kg_co2\",\"eu\",\"total_flight_miles\"], _tonnes_co2);\n  main.variable(observer(\"fmt_num\")).define(\"fmt_num\", [\"d3\"], _fmt_num);\n  main.variable(observer(\"fmt_num_round\")).define(\"fmt_num_round\", [\"d3\"], _fmt_num_round);\n  main.variable(observer()).define([\"md\"], _21);\n  main.variable(observer(\"d3\")).define(\"d3\", [\"require\"], _d3);\n  main.variable(observer(\"eu\")).define(\"eu\", [\"require\"], _eu);\n  const child1 = runtime.module(define1);\n  main.import(\"chart\", child1);\n  const child2 = runtime.module(define2);\n  main.import(\"table\", child2);\n  main.variable(observer(\"serialize\")).define(\"serialize\", [\"d3\"], _serialize);\n  main.variable(observer(\"getDistanceFromLatLonInMiles\")).define(\"getDistanceFromLatLonInMiles\", _getDistanceFromLatLonInMiles);\n  main.variable(observer(\"airports\")).define(\"airports\", [\"d3\"], _airports);\n  main.variable(observer(\"airports_icao_dict\")).define(\"airports_icao_dict\", [\"airports\"], _airports_icao_dict);\n  main.variable(observer(\"options\")).define(\"options\", [\"airports\"], _options);\n  main.variable(observer(\"get_icao_from_value\")).define(\"get_icao_from_value\", _get_icao_from_value);\n  return main;\n}\n","/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport React from \"react\";\nimport {MDXLayout} from \"../components/MDXLayout\";\nimport {SEO} from \"../components/SEO\";\nexport const Head = props => React.createElement(SEO, {\n  frontmatter: props.pageContext.frontmatter\n});\nimport styles from '../styles/flight_distance_calc.css';\nimport notebook from '@robinl/flight-distance-calculator';\nimport {ObservableCell, WithObservableProvider} from '../components/ObservableCells';\nfunction _createMdxContent(props) {\n  return React.createElement(WithObservableProvider, {\n    notebook: notebook\n  }, React.createElement(ObservableCell, {\n    cellName: \"title\"\n  }), React.createElement(ObservableCell, {\n    cellName: \"viewof flights_list\"\n  }), React.createElement(ObservableCell, {\n    cellName: \"blurb\"\n  }), React.createElement(ObservableCell, {\n    cellName: \"table_of_distances\"\n  }), React.createElement(ObservableCell, {\n    cellName: \"download_as_csv\"\n  }), React.createElement(ObservableCell, {\n    cellName: \"flights_chart\"\n  }), React.createElement(ObservableCell, {\n    cellName: \"file_upload_blurb\"\n  }), React.createElement(ObservableCell, {\n    cellName: \"viewof upload\"\n  }));\n}\nfunction MDXContent(props = {}) {\n  return React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props));\n}\nexport default MDXContent;\n","import React, {\n    useRef,\n    useEffect,\n    createContext,\n    useContext,\n    useState,\n} from 'react';\nimport { Runtime, Inspector, Library } from '@observablehq/runtime';\n\nconst ObservableRuntimeContext = createContext(null);\n\nconst mountId = 'mdx-container-div';\n\nconst stdlib = new Library();\n\nconst library = Object.assign({}, stdlib, { width: width_cells });\n\nfunction width_cells() {\n    return stdlib.Generators.observe(notify => {\n        let width1 = notify(document.getElementById(mountId).clientWidth);\n        function resized() {\n            let width2 = document.getElementById(mountId).clientWidth;\n            if (width2 !== width1) notify((width1 = width2));\n        }\n\n        window.addEventListener('resize', resized);\n        return () => window.removeEventListener('resize', resized);\n    });\n}\n\nexport function ObservableProvider({ notebook, children }) {\n    const [sharedRefs, setSharedRefs] = useState({});\n    const runtime = new Runtime(\n        Object.assign({}, new Library(), { width: width_cells })\n    );\n\n    useEffect(() => {\n        runtime.module(notebook, name => {\n            if (sharedRefs[name]) {\n                return new Inspector(sharedRefs[name]);\n            }\n        });\n        return () => runtime.dispose();\n    }, [runtime, sharedRefs, notebook]);\n\n    return (\n        <ObservableRuntimeContext.Provider value={{ setSharedRefs }}>\n            {children}\n        </ObservableRuntimeContext.Provider>\n    );\n}\n\nexport function ObservableCell({ cellName, styles, className }) {\n    const ref = useRef(null);\n    const { setSharedRefs } = useContext(ObservableRuntimeContext);\n\n    useEffect(() => {\n        setSharedRefs(prevRefs => ({ ...prevRefs, [cellName]: ref.current }));\n    }, [cellName, setSharedRefs]);\n\n    return <div ref={ref} style={styles} className={className} />;\n}\n\nexport function WithObservableProvider({ notebook, children }) {\n    return (\n        <ObservableProvider notebook={notebook}>{children}</ObservableProvider>\n    );\n}\n","import { graphql, useStaticQuery } from 'gatsby';\n\nexport const useSiteMetadata = () => {\n    const data = useStaticQuery(graphql`\n        query {\n            site {\n                siteMetadata {\n                    title\n                    description\n                    twitterUsername\n                    image\n                    siteUrl\n                }\n            }\n        }\n    `);\n\n    return data.site.siteMetadata;\n};\n","import React from 'react';\nimport { useSiteMetadata } from '../hooks/use-site-metadata';\n\nexport const SEO = ({ frontmatter }) => {\n    const {\n        title: defaultTitle,\n        description: defaultDescription,\n        image,\n        siteUrl,\n        twitterUsername,\n    } = useSiteMetadata();\n\n    const seo = {\n        title: frontmatter?.title || defaultTitle,\n        description: frontmatter?.description || defaultDescription,\n        image: `${siteUrl}${frontmatter?.image || image}`,\n        url: `${siteUrl}${frontmatter?.pathname || ``}`,\n        twitterUsername,\n        ...frontmatter,\n    };\n\n    const stylesheetLink = frontmatter?.stylesheet;\n\n    return (\n        <>\n            <title>{seo.title}</title>\n            <meta name=\"description\" content={seo.description} />\n            <meta name=\"image\" content={seo.image} />\n            {stylesheetLink && (\n                <link\n                    rel=\"stylesheet\"\n                    type=\"text/css\"\n                    href={`/styles/${stylesheetLink}`}\n                />\n            )}\n        </>\n    );\n};\n"],"names":["_1","md","_chart","DOM","width","height","d3","projection","sphere","land","resample","drag","routes","context","context2d","path","geoPath","colour_scale","scaleSequential","interpolateOrRd","domain","extent","d","render","clearRect","beginPath","fillStyle","fill","stroke","forEach","coordinates","resampled","mid_point_with_drift","route","type","lineWidth","lineO","strokeStyle","select","canvas","call","on","node","_4","_d3","require","_topojson","_world","json","_land","topojson","world","feature","objects","_drag","versor","v0","q0","r0","cartesian","invert","mouse","this","rotate","v1","q1","multiply","delta","rotation","_height","_projection","geoEqualEarth","fitExtent","translate","precision","_sphere","_resample","i","n","length","before","after","c0","slice","c1","p0","p1","x10","y10","d1","push","c2","geoInterpolate","p2","x20","y20","dz","t","_versor","runtime","observer","main","module","variable","define","opinionPolls","JSON","stringify","_2","_3","table","titanicData","html","sortable","columns","Fare","formatter","val","format","Name","parts","match","_5","spotify","rank","style","Track","Streams","_table","defaultOptions","th","identity","data","options","Object","assign","paged","sortKey","sortDirection","page","Error","keys","map","key","opts","bake","sort","a","b","as","bs","localeCompare","res","rows","pages","Math","ceil","header","c","row","displayValue","window","HTMLElement","tagName","Array","from","_","dom","rerender","firstChild","remove","appendChild","addEventListener","e","target","dataset","action","parseInt","_7","_8","kenyaData","method","title","percent","_9","_name","name","value","elem","dispatchEvent","CustomEvent","elected","approval","color","scaleLinear","range","_11","_th","sortIndicator","arrow","displayedTitle","undefined","_style","_14","_defaultOptions","_identity","_17","_19","async","_spotifyCharts","FileAttachment","csv","url","_spotify","spotifyCharts","_kenyaData","_opinionPolls","_titanicData","csvParse","Age","G","input","_title","_flights_list","get_icao_from_value","dep_box","arr_box","add_to_list","reset_list","empty_inputs","switch_inputs","div","onclick","dep_value","children","arr_value","dval","_selected_airports","flights_list","airports_icao_dict","get","_table_of_distances","data_for_table","_blurb","fmt_num","total_flight_miles","fmt_num_round","total_energy_usage","tonnes_co2","_selected_airports_with_distances","selected_airports","getDistanceFromLatLonInMiles","airport0","airport1","new_dict","entries","lat1","lng1","lat2","lng2","_data_for_table","selected_airports_with_distances","to","miles","csvFormat","_download_as_csv","serialize","download","_file_upload_blurb","_upload","_csv_data","Files","upload","$0","text","_flights_chart","chart","_total_flight_miles","sum","distance","_total_energy_usage","eu","flying","flying_miles_to_kwh","_kwh_to_kg_co2","kwh","convert","per","_tonnes_co2","kwh_to_kg_co2","_fmt_num","_fmt_num_round","_21","_eu","_serialize","Blob","_getDistanceFromLatLonInMiles","lon1","lon2","deg2rad","deg","PI","dLat","dLon","sin","cos","atan2","sqrt","_airports","then","t2","autoType","_airports_icao_dict","airports","Map","icao","_options","city","country","iata","_get_icao_from_value","exec","child1","import","child2","Head","props","React","SEO","frontmatter","pageContext","_createMdxContent","WithObservableProvider","notebook","ObservableCell","cellName","MDXLayout","ObservableRuntimeContext","createContext","mountId","stdlib","Library","width_cells","Generators","observe","notify","width1","document","getElementById","clientWidth","resized","width2","removeEventListener","ObservableProvider","_ref","sharedRefs","setSharedRefs","useState","Runtime","useEffect","Inspector","dispose","Provider","_ref2","styles","className","ref","useRef","useContext","prevRefs","current","_ref3","defaultTitle","description","defaultDescription","image","siteUrl","twitterUsername","useStaticQuery","site","siteMetadata","seo","pathname","stylesheetLink","stylesheet","content","rel","href"],"sourceRoot":""}